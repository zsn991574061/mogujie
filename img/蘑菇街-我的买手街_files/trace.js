var newcinfo=function(t,i,n){if(n){var o=this;return this.url=window.location.protocol+"//webim.mogujie.com/jsonp/cinfo/1",this.IDLE=!0,this.trigger=function(t,o){n(i).trigger(t,o)},this.getData=function(t){if(o.IDLE){o.IDLE=!1;var i=0;n.ajax({url:o.url,data:t||{},dataType:"jsonp",timeout:9e3,success:function(t){t&&t.success&&t.data>0&&(i=t.data)},complete:function(){o.IDLE=!0,o.trigger("hasUnread",i)}})}},{refresh:function(t){o.getData(t)}}}}(window,document,jQuery);require([],function(){function t(t,e){this.init(t,e)}function e(){function t(t){return $.trim(t).replace(/(<|>|'|"|window|alert|eval|$|jQuery)/gi,"")}l.on("keyup keydown",function(a){var i=$(this),n=$("#select_type");if(!n.length||"bao"===n.val()||"5"===n.val())switch(a.keyCode){case 40:if("keyup"==a.type||!c.data("isshow"))break;g.chooseIndex=g.chooseIndex+1>g.tipLength-1?0:++g.chooseIndex;var o=v.changeListTab(g.chooseIndex);l.val(o);break;case 38:if("keyup"==a.type||!c.data("isshow"))break;g.chooseIndex=g.chooseIndex-1<0?g.tipLength-1:--g.chooseIndex;var o=v.changeListTab(g.chooseIndex);l.val(o);break;case 13:if("keyup"==a.type)break;a.preventDefault(),e.submitBefore(g.chooseType,g.chooseIndex),h.submit();break;case 37:break;case 39:break;default:clearTimeout(r),r=setTimeout(function(){var e=t(i.val());v.resetFactory(e)},500)}}).on("focus",function(){var e=$(this),a=$("#select_type");if(r&&clearTimeout(r),!a.length||"bao"===a.val()||"5"===a.val()){var i=t(e.val());clearTimeout(r),r=setTimeout(function(){v.resetFactory(i)},300)}}).on("blur",function(){$("body").bind("click",function(t){$(t.target).parents(".seatch_type_msearch").length||(c.empty().data("isshow",!0).hide(),$("body").unbind("click"))})}),c.on("mouseenter",".search_tip li",function(t){var e=$(this),a=e.index();g.chooseIndex=a,v.changeListTab(a)}).on("click",".search_tip li",function(t){var a=$(this).find(".title").text();$(t.target).hasClass("prop")&&(a+=" "+$(t.target).text()),e.submitBefore(g.chooseType,g.chooseIndex),l.val(a),h.submit()}),c.on("click",".hot_list li",function(){var t=$(this);return e.submitBefore(v.hotTypeName,t.index()),l.val(t.find("span").html()),h.submit(),!1}),c.on("click",".local_del",function(t){var e=$(this),a=e.parent();f.del(a.find(".title").attr("title"));var i=f.getTenItem();return v.updateLocalContent(e,i),g.chooseIndex=-1,g.tipLength=i.length,!1}).on("click",".local_title .del_all",function(){var t=$(this);return f.set(),v.destoryLocalContent(t),t.remove(),g.chooseIndex=-1,g.tipLength=0,!1}),n.on("click",".selectbox a",function(t){t.preventDefault(),v.changeType($(this))}).on("mouseenter",".selectbox",function(){c.hide(),$(this).addClass("sele_hover")}).on("mouseleave",".selectbox",function(){$(this).removeClass("sele_hover")}),h.submit(function(){var a=$(this),i=t(l.val()),n=l.attr("def-v");if(""==i||i==n){if(""==i&&"shop"==$("#select_type").val())return!1;var o=l.data("def");l.val(o||"");var s='<input type="hidden" name="from" value="searchplacehold" id="TJ">';$("#top_nav_form").append(s),setTimeout(function(){$("#TJ").remove()},1e3)}else i==$.trim(l.val())&&"bao"==$("#select_type").val()&&f.addOne(i);if(h.find(".emptyvalue").remove(),a.data("index")>-1&&null!==a.data("type")){var r='<input type="hidden" class="emptyvalue" name="from" value="'+a.data("type")+"querytip"+a.data("index")+'">';h.append(r)}return v.destoryContent(),e.submitAfter(),!1}),v.showStickySearch()&&v.initStickySearch()}var a=MoGu.util&&MoGu.util.getStore&&MoGu.util.getStore(),i=MoGu.ui&&MoGu.ui.getdoT&&MoGu.ui.getdoT();if(i&&a){var n=$("#nav_search_form"),o=function(){var t="http://mce.mogucdn.com/jsonp/multiget/3?pids=14360",e=new Image;e.src="http://s16.mogucdn.com/p2/160811/upload_6jbd383jh8hhgjh7i5fgg6g4hbca2_332x180.png",$.ajax({url:t,type:"GET",timeout:2e4,data:{},dataType:"jsonp",jsonpCallback:"getImg",success:function(t){if(t&&t.success&&t.data&&t.data[14360]&&t.data[14360].list&&t.data[14360].list[0]){var a=t.data[14360].list[0];if(a.link&&""!=a.link&&($(".header_mid .wrap .logo").attr("href",a.link),$(".sticky-search-container .wrap .logo").attr("href",a.link)),a.codeImg&&""!=a.codeImg){var i=new Image;i.src=a.codeImg,$(".header_mid .wrap .mid_fr").html('<img src="'+a.codeImg+'" alt="蘑菇街，我的买手街">')}else $(".header_mid .wrap .mid_fr").html('<img src="'+e.src+'" alt="蘑菇街，我的买手街">');if(a.logoImg&&""!=a.logoImg){var n=new Image;n.src=a.logoImg,$(".header_mid .wrap .logo").css({"background-image":"none"}),$(".header_mid .wrap .logo").html('<img src="'+a.logoImg+'" alt="蘑菇街，我的买手街">')}a.sLogoImg&&""!=a.sLogoImg&&$(".sticky-search-container .logo-wrap .logo img").attr("src",a.sLogoImg),a.codeBg&&""!=a.codeBg&&$(".header_mid .wrap .mid_fr").css({"background-image":'url("'+a.codeBg+'")'})}else $(".header_mid .wrap .mid_fr").html('<img src="'+e.src+'" alt="蘑菇街，我的买手街">')},error:function(){$(".header_mid .wrap .mid_fr").html('<img src="'+e.src+'" alt="蘑菇街，我的买手街">')}})},s=function(){function t(){var t=navigator.userAgent,e=t.indexOf("Opera")>-1,a=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1&&!e,i=t.indexOf("Firefox")>-1;t.indexOf("Safari")>-1;if(a){var n=(IE55=IE6=IE7=IE8=!1,new RegExp("MSIE (\\d+\\.\\d+);"));n.test(t);var o=parseFloat(RegExp.$1);if(IE55=5.5==o,IE6=6==o,IE7=7==o,IE8=8==o,IE55)return"IE55";if(IE6)return"IE6";if(IE7)return"IE7";if(IE8)return"IE8"}return i?"FF":e?"Opera":void 0}"IE55"!=t()&&"IE6"!=t()&&"IE7"!=t()&&"IE8"!=t()&&$(".top_nav_search .top_search_hint").addClass("is-not-ie8-hack")};if(o(),s(),n.length){var r,c=$(".top_search_hint"),l=n.find(".ts_txt"),h=$("#top_nav_form"),p=$("#select_type"),d=n.find(".selectbox"),u="http://search.mogujie.com/jsonp/searchTips/1",m={nowHost:window.location.host,defultHost:"http://search.mogujie.com",template:'<div class="search_tip_box fl">{{=it.searchResult}}</div>',listItemTemp:['<div class="mr300 tip_wrap">','{{ if(it.titleName && it.titleName != ""){ }}','<h3 class="search_tip_title">{{=it.titleName}}</h3>',"{{ }else{ }}","{{ } }}",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li>",'<a href="{{=item.pcurl}}" class="title" title="{{=item.title}}" >{{=item.title}}</a>',"{{~item.props :prop: i}}",'{{ if (prop.title && prop.title != "") { }}','<a href="{{=prop.pcurl}}" class="prop" title="{{=prop.title}}"><span>{{=prop.title}}</sapn></a>',"{{ } }}","{{~}}","</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),localItemTemp:['<div class="mr300 tip_wrap">','<h3 class="search_tip_title local_title clearfix">',"{{ if(it.items.length){ }}",'<span class="del_all">删除</span>',"{{ } }}","历史记录","</h3>",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}",'<li class="local_item">','<a href="javascript:;" class="title" title="{{=item}}" >{{=item}}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}",'<span class="nums local_del">x</span>',"</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),hotKeyTpl:['<div class="search_hot_wrap">','<h3 class="search_tip_title hot_title">热门关键词</h3>','<ul class="hot_list clearfix">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li><span>{{= item.title }}</span></li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),emptyTpl:['<div class="mr300 tip_wrap">','<p class="tip_none">暂无相关热门关键词</p>',"</div>"].join("")},f={keyName:"_search_local_history",keyShowName:"_search_local_history_show",maxLength:20,showLength:10,isshow:function(){return!0},abtest:function(t){a.set(this.keyShowName,1)},get:function(){return a.get(this.keyName)||[]},getTenItem:function(){var t=this.get();return t.slice(0,this.showLength)},set:function(t){a.set(this.keyName,t||[])},addOne:function(t){if(t=$.trim(t),""!=t){var e=this.get(),a=$.inArray(t,e);-1==a?(e.unshift(t),e.length>this.maxLength&&e.pop()):(e.splice(a,1),e.unshift(t)),this.set(e)}},del:function(t){t=$.trim(t);var e=this.get(),a=$.inArray(t,e);a>-1&&(e.splice(a,1),this.set(e))}};GetQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);return null!=a?decodeURIComponent(a[2]):""},t.prototype.init=function(t,e){this.chooseIndex=-1,this.chooseType=t,this.tipLength=e||0};var g=new t("undefined"),v={ajaxRequest:null,hotKeyArr:[],isShopHost:function(){return!1},showStickySearch:function(){var t=(location.pathname,$("#body_wrap")),e=t.length>0?t.offset().top:150;return 150>e&&(e=150),"show"==$("#J_searchbar_flag").val()?(this.stickyTargetTop=e,!0):!1},initSearchForm:function(t){var e=h.find(".ts_txt"),a=GetQueryString("q");a&&e.attr("def-v","").val(a),$.ajax({url:"http://search.mogujie.com/jsonp/hotSearchWord/1",dataType:"jsonp",type:"get",success:function(i){if(i&&"SUCCESS"==i.returnCode){var n=i.data,o=n.tips,s=Math.floor(Math.random()*o.length+1)-1,r=o[s],c=n.hots;a||e.attr("def-v",r.info).val(r.info),e.attr("data-def",r.title);var l="";$(c).each(function(t,e){var a=['<a rel="nofollow" class="ts_hotword" href="',"http://list.mogujie.com/s","?q="+e.q,"&from=hotword",'">',e.title,"</a>"].join("");l+=a}),$(".ts_hotwords").html(l)}$.isFunction(t)&&t(i)},fail:function(){}})},resetFactory:function(t){this.isShopHost()?this.resetShopContent(t):f.isshow()?this.resetListContent(t):this.resetOldContent(t)},resetListContent:function(e){function a(t){n(function(){o()})}function n(a){s.ajaxRequest&&s.ajaxRequest.abort();var i=f.getTenItem();return""==$.trim(e)?(r.push(s.renderLocalContent(i)),void($.isFunction(a)&&a())):void(s.ajaxRequest=$.ajax({url:u,dataType:"jsonp",type:"get",data:{keyword:e},success:function(e){if(e&&e.success){var i=e.data.tips.length;0==i?r.push(s.renderEmptyContent()):(r.push(s.renderSearchContent(e.data.tips)),g=new t(s.searchTypeName,i))}$.isFunction(a)&&a()},fail:function(){}}))}function o(){var t=i.template(m.template)({searchResult:r.join("")});c.html(t),s.showContentBox()}var s=this,r=[];a(s.hotKeyArr)},resetShopContent:function(e){function a(a){o.ajaxRequest&&o.ajaxRequest.abort(),o.ajaxRequest=$.ajax({url:u,dataType:"jsonp",type:"get",data:{keyword:e},success:function(e){if(e&&e.success){var i=e.data.tips.length;0==i?s.push(o.renderEmptyContent()):(s.push(o.renderSearchContent(e.data.tips,r)),g=new t(l,i))}$.isFunction(a)&&a()},fail:function(){}})}function n(){var t=i.template(m.template)({searchResult:s.join("")});c.html(t),o.showContentBox()}var o=this,s=[],r="",l=""!=e?o.searchTypeName:o.hotTypeName;a(function(){n()})},resetOldContent:function(e){function a(a){o.ajaxRequest&&o.ajaxRequest.abort(),o.ajaxRequest=$.ajax({url:u,dataType:"jsonp",type:"get",data:{keyword:e},success:function(e){if(e&&e.success){var i=e.data.tips.length;0==i?s.push(o.renderEmptyContent()):(s.push(o.renderSearchContent(e.data.tips,r)),g=new t(l,i))}$.isFunction(a)&&a()},fail:function(){}})}function n(){var t=i.template(m.template)({searchResult:s.join("")});c.html(t),c.find(".tip_wrap").removeClass("mr300").addClass("mr300_fix"),o.showContentBox()}var o=this,s=[],r=""!=e?"搜索结果":"热门关键词",l=""!=e?o.searchTypeName:o.hotTypeName;a(function(){n()})},searchTypeName:"",renderSearchContent:function(t,e){return i.template(m.listItemTemp)({titleName:e||null,items:t})},localTypeName:"local",renderLocalContent:function(t){return i.template(m.localItemTemp)({items:t})},updateLocalContent:function(t,e){var a=t.parent(),i=t.parents(".search_tip");if(a.length&&i.length)if(e.length<f.showLength)a.remove();else{var n=e[f.showLength-1];a.find(".title").attr("title",n).html(n),a.appendTo(i)}},destoryLocalContent:function(t){var e=t.parents(".tip_wrap").find(".search_tip");e.length&&e.empty()},hotTypeName:"default",renderHotContent:function(t){for(var e=[],a=0;a<t.length;a++)e.push({title:t[a]});return i.template(m.hotKeyTpl)({items:e})},renderEmptyContent:function(){return m.emptyTpl},destoryContent:function(){c.empty().hide()},getContentPosition:function(t,e){var a=e.offset(),i=t.data("fixleft"),n=t.data("fixtop");i&&(a.left+=parseInt(i)),n&&(a.top-=parseInt(n));var o=e.width()-34;t.css({left:a.left,top:a.top+e.height()+2,width:o}).addClass("hasposition")},showContentBox:function(){c.show().data("isshow",!0)},changeListTab:function(t){var e=c.find(".search_tip li"),a=e.eq(t);return e.removeClass("checked"),a.addClass("checked"),a.find(".title").text()},changeType:function(t){var e=t.parent(),a=e.attr("data-index"),i=t.text();if(p.val(a),d.find(".selected").text("搜"+i),e.siblings("li").removeClass("current"),e.addClass("current"),"shop"==a)l.val()==l.attr("def-v")&&l.val("");else if(""==l.val()){var n=l.attr("def-v");l.val(n)}4==a?"shop.mogujie.com"===m.nowHost?h.attr("action",m.defultHost+"/group/search/"):h.attr("action","/group/search/"):"shop.mogujie.com"===m.nowHost?h.attr("action",m.defultHost+"/search"):"shop"==a?h.attr("action","http://www.mogujie.com/book/search/shop"):h.attr("action",m.defultHost+"/search"),d.removeClass("sele_hover")},initStickySearch:function(){var t=$("#nav_search_form"),e=['<div id="J_sticky_container" class="sticky-search-container">','<div class="wrap clearfix">','<div class="logo-wrap clearfix">','<a rel="nofollow" href="http://www.mogujie.com" class="logo" title="蘑菇街|我的买手街"><img src="http://s18.mogucdn.com/p2/160908/upload_37che13j0d67379a6776fi6kbk71k_224x70.png" alt="蘑菇街，我的买手街"></a>',"</div>",'<div class="sticky-search-content"></div>',"</div>","</div>"].join("");$("body").append(e);var a=$(".sticky-search-container");$(window).off("scroll.sticky").on("scroll.sticky",function(){$(document).scrollTop()>v.stickyTargetTop?a.hasClass("lets-rock")||a.find(".sticky-search-content").append(t).end().addClass("lets-rock"):a.hasClass("lets-rock")&&($(".normal-search-content").append($("#nav_search_form")),a.find(".sticky-search-content").empty().end().removeClass("lets-rock"))})}};e.submitBefore=function(t,e){h.data({type:t,index:e})},e.submitAfter=function(){h.removeData("type index");var t=$.trim(h.find("input[name=t]").val());h.find("input[name=t]").remove(),g.chooseType="undefined",g.chooseIndex=-1;var e=$.map(h.serializeObject(),function(t,e){return[e,encodeURIComponent(t)].join("=")}).join("&"),a="";a="shop"==t?"http://www.mogujie.com/book/search/shop?"+e:"http://list.mogujie.com/s?"+e,logger&&logger.generatePtpParams&&(a=logger.generatePtpParams(a)),window.location.href=a};var y=function(){MoGu.util.inputTextHide(l,"ts_high"),"www.mogujie.com"===m.nowHost||d.parents(".store_header").length||h.attr("action",m.defultHost+"/search"),h.find(".ts_btn").attr("disabled",!1),e()};v.initSearchForm(y)}}});!function(r){var n=function(r,n){return r<<n|r>>>32-n},t=function(r,n){var t,o,e,u,f;return e=2147483648&r,u=2147483648&n,t=1073741824&r,o=1073741824&n,f=(1073741823&r)+(1073741823&n),t&o?2147483648^f^e^u:t|o?1073741824&f?3221225472^f^e^u:1073741824^f^e^u:f^e^u},o=function(r,n,t){return r&n|~r&t},e=function(r,n,t){return r&t|n&~t},u=function(r,n,t){return r^n^t},f=function(r,n,t){return n^(r|~t)},i=function(r,e,u,f,i,a,c){return r=t(r,t(t(o(e,u,f),i),c)),t(n(r,a),e)},a=function(r,o,u,f,i,a,c){return r=t(r,t(t(e(o,u,f),i),c)),t(n(r,a),o)},c=function(r,o,e,f,i,a,c){return r=t(r,t(t(u(o,e,f),i),c)),t(n(r,a),o)},C=function(r,o,e,u,i,a,c){return r=t(r,t(t(f(o,e,u),i),c)),t(n(r,a),o)},g=function(r){for(var n,t=r.length,o=t+8,e=(o-o%64)/64,u=16*(e+1),f=Array(u-1),i=0,a=0;t>a;)n=(a-a%4)/4,i=8*(a%4),f[n]=f[n]|r.charCodeAt(a)<<i,a++;return n=(a-a%4)/4,i=8*(a%4),f[n]=f[n]|128<<i,f[u-2]=t<<3,f[u-1]=t>>>29,f},h=function(r){var n,t,o="",e="";for(t=0;3>=t;t++)n=255&r>>>8*t,e="0"+n.toString(16),o+=e.substr(e.length-2,2);return o},d=function(r){r=r.replace(/\x0d\x0a/g,"\n");for(var n="",t=0;t<r.length;t++){var o=r.charCodeAt(t);128>o?n+=String.fromCharCode(o):o>127&&2048>o?(n+=String.fromCharCode(192|o>>6),n+=String.fromCharCode(128|63&o)):(n+=String.fromCharCode(224|o>>12),n+=String.fromCharCode(128|63&o>>6),n+=String.fromCharCode(128|63&o))}return n};r.extend({md5:function(r){var n,o,e,u,f,v,m,S,l,A=Array(),s=7,x=12,y=17,b=22,j=5,p=9,w=14,L=20,Q=4,k=11,q=16,z=23,B=6,D=10,E=15,F=21;for(r=d(r),A=g(r),v=1732584193,m=4023233417,S=2562383102,l=271733878,n=0;n<A.length;n+=16)o=v,e=m,u=S,f=l,v=i(v,m,S,l,A[n+0],s,3614090360),l=i(l,v,m,S,A[n+1],x,3905402710),S=i(S,l,v,m,A[n+2],y,606105819),m=i(m,S,l,v,A[n+3],b,3250441966),v=i(v,m,S,l,A[n+4],s,4118548399),l=i(l,v,m,S,A[n+5],x,1200080426),S=i(S,l,v,m,A[n+6],y,2821735955),m=i(m,S,l,v,A[n+7],b,4249261313),v=i(v,m,S,l,A[n+8],s,1770035416),l=i(l,v,m,S,A[n+9],x,2336552879),S=i(S,l,v,m,A[n+10],y,4294925233),m=i(m,S,l,v,A[n+11],b,2304563134),v=i(v,m,S,l,A[n+12],s,1804603682),l=i(l,v,m,S,A[n+13],x,4254626195),S=i(S,l,v,m,A[n+14],y,2792965006),m=i(m,S,l,v,A[n+15],b,1236535329),v=a(v,m,S,l,A[n+1],j,4129170786),l=a(l,v,m,S,A[n+6],p,3225465664),S=a(S,l,v,m,A[n+11],w,643717713),m=a(m,S,l,v,A[n+0],L,3921069994),v=a(v,m,S,l,A[n+5],j,3593408605),l=a(l,v,m,S,A[n+10],p,38016083),S=a(S,l,v,m,A[n+15],w,3634488961),m=a(m,S,l,v,A[n+4],L,3889429448),v=a(v,m,S,l,A[n+9],j,568446438),l=a(l,v,m,S,A[n+14],p,3275163606),S=a(S,l,v,m,A[n+3],w,4107603335),m=a(m,S,l,v,A[n+8],L,1163531501),v=a(v,m,S,l,A[n+13],j,2850285829),l=a(l,v,m,S,A[n+2],p,4243563512),S=a(S,l,v,m,A[n+7],w,1735328473),m=a(m,S,l,v,A[n+12],L,2368359562),v=c(v,m,S,l,A[n+5],Q,4294588738),l=c(l,v,m,S,A[n+8],k,2272392833),S=c(S,l,v,m,A[n+11],q,1839030562),m=c(m,S,l,v,A[n+14],z,4259657740),v=c(v,m,S,l,A[n+1],Q,2763975236),l=c(l,v,m,S,A[n+4],k,1272893353),S=c(S,l,v,m,A[n+7],q,4139469664),m=c(m,S,l,v,A[n+10],z,3200236656),v=c(v,m,S,l,A[n+13],Q,681279174),l=c(l,v,m,S,A[n+0],k,3936430074),S=c(S,l,v,m,A[n+3],q,3572445317),m=c(m,S,l,v,A[n+6],z,76029189),v=c(v,m,S,l,A[n+9],Q,3654602809),l=c(l,v,m,S,A[n+12],k,3873151461),S=c(S,l,v,m,A[n+15],q,530742520),m=c(m,S,l,v,A[n+2],z,3299628645),v=C(v,m,S,l,A[n+0],B,4096336452),l=C(l,v,m,S,A[n+7],D,1126891415),S=C(S,l,v,m,A[n+14],E,2878612391),m=C(m,S,l,v,A[n+5],F,4237533241),v=C(v,m,S,l,A[n+12],B,1700485571),l=C(l,v,m,S,A[n+3],D,2399980690),S=C(S,l,v,m,A[n+10],E,4293915773),m=C(m,S,l,v,A[n+1],F,2240044497),v=C(v,m,S,l,A[n+8],B,1873313359),l=C(l,v,m,S,A[n+15],D,4264355552),S=C(S,l,v,m,A[n+6],E,2734768916),m=C(m,S,l,v,A[n+13],F,1309151649),v=C(v,m,S,l,A[n+4],B,4149444226),l=C(l,v,m,S,A[n+11],D,3174756917),S=C(S,l,v,m,A[n+2],E,718787259),m=C(m,S,l,v,A[n+9],F,3951481745),v=t(v,o),m=t(m,e),S=t(S,u),l=t(l,f);var G=h(v)+h(m)+h(S)+h(l);return G.toLowerCase()}})}(jQuery);!function(e){var t={ccback:function(e){function t(e){e.s=e.s+e.t}function a(e){j+=e}function i(e,t,a){if(-1==U&&(U=t/2),1!=t)if(t==U+1)if(0>a){var o=e.s.charCodeAt(e.s.length-1);e.t=String.fromCharCode(o-1),x.ab("zq",e),i(e,t-1,a)}else{var o=e.s.charCodeAt(e.s.length-1);e.t=String.fromCharCode(o+1),x.ab("zq",e),i(e,t-1,a)}else if(U+1>t)if(0>a){var o=e.s.charCodeAt(e.s.length-1);e.t=String.fromCharCode(o+2),x.ab("zq",e),i(e,t-1,a)}else{var o=e.s.charCodeAt(e.s.length-1);e.t=String.fromCharCode(o-2),x.ab("zq",e),i(e,t-1,a)}else if(0>a){var o=e.s.charCodeAt(e.s.length-1);e.t=String.fromCharCode(o-2),x.ab("zq",e),i(e,t-1,a)}else{var o=e.s.charCodeAt(e.s.length-1);e.t=String.fromCharCode(o+2),x.ab("zq",e),i(e,t-1,a)}}function o(){this.name="bat",this.tt=4,this.q={},this.HA=function(){this.name="tabd",this.tt+=1,this.q.ab=124,this.q.ab+=291,x.t1=b;var e={};return e.qP=function(e){x.t1-=e},e.Qr=function(e){x.t1+=e},e.Jk=function(e){var t=11,a=e<<4,i=e>>>16-t,o=(a^i)>>>0,r=o+e&4294967295;return r>>>0},e.tt=911511,e}}function r(e,t,a){for(var i=e,o="",r=0;t>r;r++){i+=6;var n=a>>>32-i;n=63&n,o+=B.tz[w](n)}return o}function n(e){M[0]=String.fromCharCode(Math.floor(16*Math.random())+e)}function c(e,t){e.t=t}function s(){B.ab("jjt",65);var e="";e+=r(0,5,x.ls[1]);var t=(3&x.ls[1])<<4|x.ls[2]>>>28;return e+=B.tz[w](t),e+=r(4,4,x.ls[2]),t=(15&x.ls[2])<<2|x.ls[3]>>>30,e+=B.tz[w](t),e+=r(2,5,x.ls[3]),e+=r(0,5,x.ls[4]),t=(3&x.ls[4])<<4|2*Math.floor(4*Math.random()),e+=B.tz[w](t),x.zA=M[0]+e,e}function l(e,t,a){for(var i=t[0],o=t[1],r=0,n=0;e>n;n++)i+=(D.Jk(o)^r+a[3&r])>>>0,i=(4294967295&i)>>>0,r=(r+x.t1&4294967295)>>>0,o+=(D.Jk(i)^r+a[r>>11&3])>>>0,o=(4294967295&o)>>>0;t[0]=i,t[1]=o}function d(e){function t(e){return e.toString(16).toUpperCase()}if(null==e||""==e)return"";var a="";q+="pe",p+="en";for(var i,o=0,r=e.length;r>o;o++)i=e.charCodeAt(o),16>i?a+="%0"+i.toString(16).toUpperCase():128>i?a+=32==i?"+":i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?e.charAt(o):"%"+t(i):2048>i?(a+="%"+t(192+(i>>6)),a+="%"+t(128+i%64)):(a+="%"+t(224+(i>>12)),a+="%"+t(128+(i>>6)%64),a+="%"+t(128+i%64));return a}var u,m=10,h={s:"",t:""},g="tlitj",f="app";if(function(){u="zac"}(),10==m)var p="hi",v="i";var _="",b=function(){function e(e){t=291}for(var t=2041507,a=0;8>a;a++)t+=291;return e(t),u+="exime",t>44084?t+62-2+291+1406985:t-62-5347-9-1560}(),k="tdd",y="va",w="ch";u=u.replace("z","D");var x=function(){var e={};e.tt=8;var t={};return e.ab=function(e,a){if(t[e]){for(var i=t[e],o=i.length;o--;)i[o].qq(a);return this}},e.ba=function(e,a){t[e]=t[e]?t[e]:[],t[e].push({tt:10,qq:a})},e}(),C="an";u=u.replace("c","t"),y+="zue",w+="vrAt",k=k.replace("t","a");var j="gmt";m="cr",x.zA="",b+=10449;var z=12,T={r1:137,hj:function(e){return z+e},v:2,w:function(){function e(){z="window"}e()}};p+="dd",T.w(),x.ib=f,_="senAnn",m.replace("c","z"),x.re="am".replace;y.replace("z","l");g=x.re.call(g,/t/g,"c");var G=function(){var e=123,t=e+255;return t&=15,e=window,t>25&&(e+="pt"),e};k+="gvbnt";var I={ab:9,ll:function(){return ab+"abc"}};m={s:"",t:""},_+="ribune",u=x.re.call(u,"x","T");var q="ty",M=[0];g=x.re.call(g,"j","k");var E="lb_crnvenv";I.x=1,x.SO=function(e){x.t1*=e},h.s="z",x.oQ=t;var U=-1;m.s="cre",k+="Listbnbr",I.m=G,_=x.re.call(_,/n/g,"t");var O={s:800,t:11},S={};!function K(e){1!=e&&(e>5?M.push(e*e*e*e+16668304):M.push(e*e+16),K(e-1))}(11),x.ls=M,S.s="cli",m.t="ate",x.kp=_,k=k.replace("g","E"),S.t="ent",w=x.re.call(w,"v","a"),M[0]=Math.floor(16*Math.random())+65,x.ba("zq",x.oQ),x.ab("zq",m),i(h,26,-10),O.t+=100,h.s=h.s+"0",x.ba("JK",a),M[0]=String.fromCharCode(M[0]),U=-1,i(h,10,5);var A=3,L="bvbnt";k=k.replace(/b/g,"e"),function(){E=E.replace("r","o"),x.eb=i,U=-1,x.wq=h}(),o.prototype=x;var B=new o;B.ba("Ma",x.SO);var N=[-1,-2,-4,-8],J=[100,10];A+=1,x.ba("jjt",n),T.v=I.m.apply(),B.wq.s+=String.fromCharCode(43),L=B.re.call(L,/b/g,"e"),x.wq.s+="/Z";var P={};!function(){E=B.re.call(E,/v/g,"t"),E=B.re.call(E,"b","g")}();var Q="cmass";C+="zizo";(function(){var e={};return e.v1=123,e.ff=function(e){return e/=2,e-2},e.ff(e.v1),J.push(T.v),e})();P.s="si",J.push(J[2].document),j=j.replace("m","e");var R="intex",D=B.HA();x.ab("zq",O),P.t="gnfo",Q=Q.replace("m","l"),B.ab("Ma",1231458),x.eb(x.wq,26,-74),x.t1=B.t1/2+338063271,R=B.re.call(R,"t","d");var F=new o;B.tz=x.wq.s,B.ib+="end",F.bn=S,R+="Of",v+="npzt",f="Ch",B.ib+=f+"ild",F.Oz=s;var H=E.substring(0,3);v=F.re.call(v,"z","u"),H=F.re.call(H,"l","r"),B.ab("JK","Element"),F.ab("zq",S),x.ab("zq",P),c(S,"X"),F.ii=j+"ById",m.t=F.ii.substring(3,10),H+="suz",x.gw=l,B.ab("JK","sByTagName"),H=x.re.call(H,"z","b"),Q+="Name",F.ab("zq",m),H+="mit",x.ab("zq",F.bn),T.gc=function(e,t){for(var a=e[j]("*"),i=0;i<a.length;i++)if(-1!=a[i][Q][R](t))return a[i];return null},F.bn.t=F.bn.s.substring(0,6)+"Y";d("dxjhdM5c"),F.re.call(C,/z/g,"t");return x.GM=function(e){e=e||J[2][L],M[1]=Math.round((new(J[2][u.substring(0,4)]))["get"+u.substring(4)]()/1e3),M[2]=e[F.bn.s],M[3]=e[F.bn.t],M[A]=Math.floor(5209*Math.random()*271)*O.s;var t=[M[1],M[2]],a=[M[3],M[4]];B.gw(M[7],t,N),B.gw(M[9],a,N);for(var i=M[4],o=1;5>o;o++)3>o?M[o]=t[o-1]:M[o]=a[o-3];F.Oz(),M[4]=i},F.Gl=T.v.eci,B.GM(e),l(50,J,N),F.zA}},a={},i="lb_login",o={};o.imgCodeCheck=function(){var t=!1,a=e(".img_code_spin");if(0==a.length)return t=!0;for(var i=0;i<a.length;i++){var o=e(a[i]);if(0!=o.val()){t=!0;break}}return t};var r=function(e){var t=e.parents(".validateitem").find(".tips"),a=e.parents(".ui-option-main-box").find(".error_tip");t&&t.length>0&&t.is(":visible")&&t.remove(),a&&a.length>0&&a.is(":visible")&&a.html("")};o.imgCaptchaInit=function(){var t=e(".imgcheck_image_div"),a=e("#imgcheck_code_change"),i=function(e,t){var a=-75*((t+1)%4),i=e[0].style.backgroundPosition.split(" ");e[0].style.backgroundPosition=i[0]+" "+a+"px"};t.click(function(){r(e(this));var t=e(this).attr("f"),a=e("#img_code_spin_"+t),o=parseInt(a.val());i(e(this),o),a.val(o+1)}),a.click(function(){r(e(this)),o.imgCaptchaRecaptcha()})},o.imgCaptchaRecaptcha=function(t){var a=function(t){for(var a=e(".imgcheck_image_div"),i=a.length,o=0;i>o;o++){var r=a[o],n=r.getAttribute("f"),c=e("#img_code_spin_"+n);c.val(0);var s=e(r);s.css("background-image","url(http://portal.mogujie.com/api/validate/captcha/"+t+")"),s.css({"background-position":-75*o+"px 0"})}e("#imgcheckcode").val(t)};void 0===t?e.ajax({url:"http://portal.mogujie.com/api/validate/captcha/get",type:"get",timeout:6e4,data:{},dataType:"jsonp",cache:!1,success:function(e){var t=e.status.code;e.status.msg;if(1001==t){var i=e.result.code;a(i)}},error:function(e,t,a){"timeout"==t&&MOGU.alert(MGLANG.msgTimeout)}}):setTimeout(function(){a(t)},1)},o.imgCaptchaInit();var n={FixIe6Bug:function(){e.browser.msie&&"6.0"==e.browser.version&&document.execCommand("BackgroundImageCache",!1,!0)},GetImgCheck:function(t,a,i,r){return e(a).length>0?(r.find("#lg_chk").show(),o.imgCaptchaRecaptcha(),!1):(i.before(t),void e.ajax({url:"http://portal.mogujie.com/api/validate/captcha/get",type:"GET",dataType:"jsonp"}).then(function(t){if(1001==t.status.code){var i=['<div class="imgcheck_code_main clearfix">','<span class="notice">请点击下方图片,将她们转到正确方向</span>','<a href="javascript:void(0);" id="imgcheck_code_change" style="float: none">换一组</a>','<div class="imgcheck_code_img_div" onselectstart="return false">','<input type="hidden" value="'+t.result.code+'" id="imgcheckcode">','<div class="imgcheck_image_div" f="0" style="background:url(http://portal.mogujie.com/api/validate/captcha/'+t.result.code+') no-repeat; background-position: 0px 0;" ></div>','<input type="hidden" class="img_code_spin" id="img_code_spin_0" name="check[]" value="0" autocomplete="off">','<div class="imgcheck_image_div" f="1" style="background:url(http://portal.mogujie.com/api/validate/captcha/'+t.result.code+') no-repeat; background-position: -75px 0;" ></div>','<input type="hidden" class="img_code_spin" id="img_code_spin_1" name="check[]" value="0" autocomplete="off">','<div class="imgcheck_image_div" f="2" style="background:url(http://portal.mogujie.com/api/validate/captcha/'+t.result.code+') no-repeat; background-position: -150px 0;" ></div>','<input type="hidden" class="img_code_spin" id="img_code_spin_2" name="check[]" value="0" autocomplete="off">','<div class="imgcheck_image_div" f="3" style="background:url(http://portal.mogujie.com/api/validate/captcha/'+t.result.code+') no-repeat; background-position: -225px 0;" ></div>','<input type="hidden" class="img_code_spin" id="img_code_spin_3" name="check[]" value="0" autocomplete="off">',"</div>","</div>"].join("");setTimeout(function(){e(a).html(i).css("opacity",0).animate({opacity:1},1e3),e(".lg_chk").show(),o.imgCaptchaInit()},0)}else e(a).remove()}))},RemoveImgCheck:function(){e("#lg_chk").remove()},isImgcodeCheck:function(t,a){var i=!0;if(o.imgCodeCheck()){var r=[];e(".img_code_spin").each(function(t,a){var i=e(a).val();r.push(i)}),e("#imgcheckvalue").val(r.join("_"))}else a?a(t,"请先点击图片旋转到正确方向"):MOGU.alert("请先点击图片旋转到正确方向"),i=!1;return i}};MOGU.user_handsome_login_init=function(){function t(){var e={title:"登录蘑菇街",lightBoxId:i,contentHtml:o,scroll:!0};a=new MGLightBox(e),a.init()}var o=['<div class="login_box clearfix">','<p class="error_tip">请输入密码！</p>','<div class="lg_form">','<ul class="mod_box lo_mod_box" data-isshow="0">','<li class="login_title">','<a class="fr eb_mod" href="javascript:;">手机动态密码登录</a>',"<b>普通登录</b>","</li>",'<li class="lg_item lg_name">','<b class="lg_icon"></b>','<input type="text" maxlength="32" class="text r3" name="uname" def-v="手机/邮箱/昵称" value="手机/邮箱/昵称" style="border-color: rgb(207, 207, 207); color:#ccc;">',"</li>",'<li class="lg_item u_passwd">','<b class="lg_icon"></b>','<input type="password" name="pass" class="text">',"</li>","</ul>",'<ul class="mod_box eb_mod_box" data-isshow="0">','<li class="login_title">','<a class="fr lo_mod" href="javascript:;">普通登录</a>',"<b>手机动态密码登录</b>","</li>",'<li class="lg_item lg_name">','<b class="lg_icon"></b>','<input type="text" maxlength="32" class="text r3" name="uname" def-v="手机" value="手机" style="border-color: rgb(207, 207, 207); color:#ccc;">',"</li>",'<li class="lg_item lg_code">','<b class="lg_icon"></b>','<input type="text" maxlength="32" class="text r3" name="telcode" def-v="动态密码" value="动态密码" style="border-color: rgb(207, 207, 207); color:#ccc;">',"</li>",'<li class="lg_chk"></li>','<li class="lg_item lg_getcode">','<a href="javascript:;" class="get_tel_code" id="get_tel_code" send-method="nologin" tel-input-id="uname" ready-text="获取手机动态密码" wait-text="重新获取动态密码">获取手机动态密码</a>',"</li>","</ul>",'<div class="lg_remember"><input type="checkbox" name="remember" class="checkbox" checked=""> 记住我（两周免登录）</div>','<div class="lg_login">','<input type="button" value="" class="sub">','<input type="hidden" value="" id="imgcheckvalue">','<input type="hidden" value="" id="imgcheckcode">','<a class="ml10" href="http://www.mogujie.com/usersecurity/findpwd" target="_blank">忘记密码？</a>','<a href="http://portal.mogujie.com/user/register">新用户注册</a>',"</div>","</div>",'<div class="login_other">',"<span>其他登录方式</span>",'<a href="javascript:;" class="ui-ot-btn login_qq" data-type="qq"></a>','<a href="javascript:;" class="ui-ot-btn login_wb" data-type="sina"></a>','<a href="javascript:;" class="ui-ot-btn login_wx" data-type="weixin"></a>',"</div>","</div>"].join("");!function(){e(".light_box").remove(),t()}()},MOGU.user_handsome_login=function(o,r){function c(t){t.on("blur",'.lg_name input[name="uname"]',function(){var a,i=e(this),o=MGTOOL.trim(i.val());return""==o||o==i.attr("def-v")?!1:o==i.attr("data-lastname")?!1:(a=t.find(".lg_form").hasClass("easy_buy")?2:1,s.UI.hideError(t),void e.ajax({url:"http://portal.mogujie.com/api/validate/loginconfig",dataType:"jsonp",type:"GET",data:{uname:o,areaCode:""}}).done(function(e){if(1001!=e.status.code)return void s.UI.showError(t,e.result.message);var i=e.result.securityLevel;switch(i){case 0:t.find(".mod_box").eq(a-1).attr("data-isshow","0");break;case 1:s.UI.showError(t,e.result.message);break;case 2:t.find(".mod_box").eq(a-1).attr("data-isshow","1");var o='<div id="lg_chk" class="lg_chk"></div>',r=t.find(".lg_remember");n.GetImgCheck(o,"#lg_chk",r,t)}}).fail(function(){s.UI.showError("网络错误")}))}).on("focus",".lg_item input",function(){s.UI.hideError(t)}).on("click",".imgcheck_image_div,#imgcheck_code_change",function(){s.UI.hideError(t)}).on("click",".login_title a",function(){var a,i=e(this);return i.hasClass("tab_on")?!1:(s.UI.hideError(t),a=i.hasClass("lo_mod")?1:2,void s.UI.turnLoginMod(t,a))}).on("click","#get_tel_code",function(){var a=e(this),i=60,o=t.find(".eb_mod_box input[name='uname']").val();return!e("#get_tel_code:visible").length||a.hasClass("downing")?!1:/^1\d{10,10}$/.test(o)?e(".imgcheck_code_img_div:visible").length&&!n.isImgcodeCheck(t,s.UI.showError)?!1:(a.addClass("downing").html("正在发送……"),void e.ajax({url:"http://portal.mogujie.com/api/login/getcode",data:{mobile:o,captkey:e("#imgcheckcode").val(),captcode:e("#imgcheckvalue").val()},dataType:"jsonp",type:"GET"}).done(function(e){1001===e.status.code?(a.addClass("downing").html("重新发送(60)"),s.UI.countDownStart(a,i)):(a.removeClass("downing").html("获取手机动态密码"),s.UI.showError(t,e.status.msg))}).fail(function(e){s.UI.showError("网络错误")})):(s.UI.showError(t,"请输入正确的手机号码"),!1)}).on("click",".lg_login .sub",function(e){e.preventDefault();var i;i=t.find(".lg_form").hasClass("easy_buy")?2:1,r.Login_Light_Box=a,s.UI.submitNowForm(t,i,r,e)})}var s=this;s.UI={ajaxPost:function(t,a,i){e.ajax({url:a,type:"POST",dataType:"json",data:t,success:function(e){i(e)}})},submitNowForm:function(a,i,o,r){var c,s,l=this;if("visible"==a.find(".error_tip").css("visibility"))return!1;var d=a.find(".lg_remember :checkbox").prop("checked");if(2==i){var u=a.find(".eb_mod_box"),m=u.find("input[name=uname]"),h=u.find("input[name='telcode']");if(MGTOOL.trim(m.val())==m.attr("def-v"))return l.showError(a,"请输入"+m.attr("def-v")),!1;if(MGTOOL.trim(h.val())==h.attr("def-v"))return l.showError(a,"请输入"+h.attr("def-v")),!1;c={mobile:m.val(),code:h.val(),captkey:e("#imgcheckcode").val(),captcode:e("#imgcheckvalue").val(),from:1,remember:d,mogusecret:t.ccback(r)},s="http://portal.mogujie.com/api/login/checkcode"}else{var u=a.find(".lo_mod_box"),m=u.find("input[name=uname]"),g=u.find("input[name=pass]").val();if(MGTOOL.trim(m.val())==m.attr("def-v"))return l.showError(a,"请输入"+m.attr("def-v")),!1;if(""==MGTOOL.trim(g))return l.showError(a,"请输入登录密码"),!1;if(e(".imgcheck_code_img_div:visible").length&&!n.isImgcodeCheck(a,l.showError))return!1;c={uname:m.val(),areaCode:"",password:e.md5(g),captkey:e("#imgcheckcode").val(),captcode:e("#imgcheckvalue").val(),from:2,remember:d,mogusecret:t.ccback(r)},s="http://portal.mogujie.com/api/login/login"}var f=function(e){var t=e.result;if(1001==e.status.code)switch(t.securityLevel){case 5:location.href="http://portal.mogujie.com/user/forcebind?token="+t.bindToken;break;case 4:l.showError(a,t.toastText+'。<a style="text-decoration: underline;" href="'+t.jumpUrl+'">去重置</a>');break;case 3:location.href="http://portal.mogujie.com/user/validation?pagetype=validation&code="+encodeURIComponent(t.code);break;case 0:o.Login_Light_Box.success_close("登录成功！",200),o.callback?o.callback(e.result.data):location.reload()}else l.showError(a,e.status.msg)};1==i?e.ajax({url:s,data:c,dataType:"jsonp",type:"GET"}).done(f).fail(function(){l.showError(a,"网络错误")}):2==i&&e.ajax({url:s,data:c,dataType:"jsonp",type:"GET"}).done(f).fail(function(){l.showError(a,"网络错误")})},showError:function(e,t){t&&e.find(".error_tip").html(t).css("visibility","visible")},hideError:function(e){"visible"==e.find(".error_tip").css("visibility")&&e.find(".error_tip").css("visibility","hidden")},turnLoginMod:function(e,t){var a=e.find(".lg_form");1==t?(a.find(".mod_box").hide().eq(0).show(),a.removeClass("easy_buy")):2==t&&(a.find(".mod_box").hide().eq(1).show(),a.addClass("easy_buy")),1==a.find(".mod_box:visible").attr("data-isshow")?a.find(".lg_chk").show():a.find(".lg_chk").hide()},countDownStart:function(e,t){var a=this;a.timer="";var i=function(e,t){a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){0>=t?e.html("重新发送").removeClass("downing"):(t--,e.html("重新发送("+t+")"),i(e,t))},"1000")};i(e,t)}},e(".ui-ot-btn").click(function(){var t=e(this),a={third:t.data("type"),platform:"pc",operScene:"login"};e.ajax({url:"http://portal.mogujie.com/api/oauth/login/authorize",dataType:"jsonp",data:a,type:"GET"}).done(function(e){1001==e.status.code?location.href=e.result.redirect_uri:s.UI.showError($contentsbox,a.status.msg)}).fail(function(){s.UI.showError("网络错误")})}),function(){MOGU.Globe_Bind_Keybord_Submit("",e("#"+i+" .login_btn"),"not_need_focus"),n.FixIe6Bug();var t=e("#lb_login");c(t),MOGU.Globe_Input_Text_Hide(t.find("input[type=text]"))}()},MOGU.User_Other_login=function(){var t=e("#show_more_login");t.size()>0&&e(".more_login").hover(function(){e(this).addClass("more_login_active");var a=e(this).offset().top+25,i=e(this).offset().left-90;t.css({top:a,left:i}).show()},function(){var a=e(this),i=setTimeout(function(){t.hide()},1e3);t.hover(function(){clearTimeout(i)},function(){a.removeClass("more_login_active"),t.hide()})})},MOGU.Globe_Checkcode_Change=function(){0!=e("#checkcode_change").size()&&e("#checkcode_change").click(function(){e.ajax({url:"/users/recaptcha",type:"POST",timeout:6e4,data:"{}",dataType:"json",success:function(t){if(null==t)alert(MGLANG.msgTimeout);else{var a=t.status.code,i=t.status.msg;if(1001==a){var o=t.result.data.captchaId,r=t.result.data.captchaSrc;e("#img_checkcode").attr("src",r),e("#captcha-id").val(o)}else alert(i)}},error:function(e,t,a){"timeout"==t&&alert(MGLANG.msgTimeout)}})})},jQuery(document).ready(function(e){MOGU.User_Other_login()})}(jQuery);!function(n){"use strict";"undefined"==typeof console&&(window.console={log:function(){}});var i="**trace.js---性能打点出错:";if(!window.logger)return void console.log(i+"缺少logger.js的依赖，无法进行正常打点");var e=n._trace={};e.version="0.1.5",e.util={formatUrl:function(n){n=n||location.href;var i=logger.util.getValue(e.config.customUrl);return i?i=i.split("https://").join("").split("http://").join(""):("string"==typeof n&&(n=n.split("?")[0].split("#")[0].split("https://").join("").split("http://").join(""),"/"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1))),n)}},e.config={customUrl:function(){},blankTime:"__trace__headendt"},window.TRACE_PARAMS&&logger.util.extend(e.config,TRACE_PARAMS),function(){function n(n,e,o,r){for(var t=!0,s=0;s<i.length;s++){var a=i[s]||{};if(a.msg===n&&a.file===e&&a.line===o&&a.col===r){t=!1;break}}return t}var i=[];window.onerror=function(o,r,t,s,a){if(n(o,r,t,s)){var d="";if(a){if(a.hasReported)return;d=a.stack||""}i.push({msg:o,file:r,line:t,col:s}),logger.log("016000011",{msg:o,file:r,line:t,col:s,stack:d,ua:navigator.userAgent,formatUrl:e.util.formatUrl()})}}}(),function(){function n(){var n=navigator.userAgent.toLowerCase();return/iphone|android|ipad/i.test(n)?"h5":"pc"}function i(){var n,i,e=navigator.userAgent,o="其它",r=o,t="",s="";return-1!=(n=e.indexOf("Opera"))&&(r="Opera",t=e.substring(n+6),-1!=(n=e.indexOf("Version"))&&(t=e.substring(n+8))),-1!=(n=e.indexOf("OPR"))?(r="Opera",t=e.substring(n+4)):-1!=e.indexOf("MicroMessenger")?r="Wechat":-1!=e.indexOf("QQ")?r="QQ":-1!=(n=e.indexOf("MSIE"))?(r="IE",t=e.substring(n+5)):-1!=(n=e.indexOf("Chrome"))?(r="Chrome",t=e.substring(n+7)):-1!=(n=e.indexOf("Firefox"))?(r="Firefox",t=e.substring(n+8)):-1!=e.indexOf("Trident/")?(r="IE",t=e.substring(e.indexOf("rv:")+3)):(-1!=(n=e.indexOf("Safari"))||-1!=e.indexOf("iPhone"))&&(r="Safari",t=e.substring(n+7),-1!=(n=e.indexOf("Version"))&&(t=e.substring(n+8))),-1!=(i=t.indexOf(";"))&&(t=t.substring(0,i)),-1!=(i=t.indexOf(" "))&&(t=t.substring(0,i)),-1!=(i=t.indexOf(")"))&&(t=t.substring(0,i)),t&&(s=parseInt(""+t,10),isNaN(s)&&(t=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10))),s?r+"_"+s:r+"_unknown"}function o(){var n="其它",i=n,e=navigator.userAgent,o=navigator.appVersion,r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var t in r){var s=r[t];if(s.r.test(e)){i=s.s;break}}var a=n;switch(/Windows/.test(i)&&(a=/Windows (.*)/.exec(i)[1],i="Windows"),i){case"Mac OS X":a="";break;case"Android":var d=(/Android ([\.\_\d]+)/.exec(e)[1]||"").split(".").slice(0,2);a=d.join(".");break;case"iOS":a=/OS (\d+)_(\d+)_?(\d+)?/.exec(o),a=a[1]+"."+a[2]}return i===n?i:i+a}function r(){var n,i,e=window.screen,o="";return e&&e.width&&(n=e.width?e.width:"",i=e.height?e.height:"",o+=""+n+"x"+i),o}function t(){var n=(window.devicePixelRatio?window.devicePixelRatio:1)-0;return n.toFixed(1)}e.getDeviceInfo=function(){return{platform:n(),screen:r(),os:o(),browser:i(),devicePixelRatio:t(),formatUrl:e.util.formatUrl()}}}(),function(){function n(){var n=window.performance&&window.performance.timing;if(!n)return{};var i=window[e.config.blankTime];i||(i=n.domContentLoadedEventStart);var o={dns:n.domainLookupEnd-n.domainLookupStart,tcp:n.connectEnd-n.connectStart,request:n.responseStart-n.requestStart,response:n.responseEnd-n.responseStart,domContentLoad:n.domContentLoadedEventEnd-n.navigationStart,blankTime:i-n.navigationStart,readyTime:n.domInteractive-n.navigationStart,onloadTime:n.loadEventEnd-n.navigationStart};return o}e.getPerformanceInfo=n}();var o=function(){window.TRACE_PARAMS&&logger.util.extend(e.config,TRACE_PARAMS);var n=e.getDeviceInfo(),i=e.getPerformanceInfo();logger.log("016000001",logger.util.extend({},n,i))};$(function(){var n=window.performance&&window.performance.timing;n&&0===n.loadEventEnd?$(window).on("load",function(){setTimeout(function(){o()},10)}):o()}),e.sendMsg=function(n){if(n){var i={formatUrl:e.util.formatUrl()};"object"==typeof n?(i.msg=n.message||"",i.stack=n.stack||""):i.msg=n,i.ua=navigator.userAgent,logger.log("016000011",i)}},"undefined"!=typeof module&&"object"==typeof exports?module.exports=e:"function"==typeof define&&(define.amd||define.cmd)&&define("trace",function(){return e})}(window);