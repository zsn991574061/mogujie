highLevelJs&&jQuery.extend({browser:function(){var r={},e=window.navigator.userAgent,n=uaMatch(e);return n.browser&&(r[n.browser]=!0,r.version=n.version),{browser:r}}});!function(){window.PTP_PARAMS=window.PTP_PARAMS||{};var a="cube-acm-node",n="anchor",t="module_row";$.extend(window.PTP_PARAMS,{urlExtendFn:function(s){var e,i=$(s),r=i.parents(),c=i.attr("data-ext-acm")||"",l=i.hasClass(a)||i.hasClass(n)?i:null,o=0,d=0;if($(r).each(function(n,s){$(s).hasClass(a)&&(l=$(s)),$(s).hasClass(t)&&(e=$(s))}),e&&e.length&&l&&l.length){var h=$(e).find("."+a+",."+n);d=h&&h.length,h.each(function(a,n){$(n)[0]===l[0]&&(o=a)})}var u=e&&e.attr("data-acm")||"";if(u&&l){u=u.split(".");var P=c+(c?u[6]?"-"+u[6]:"":u.join("."));return P&&(P+="-idx_"+o+"-mfs_"+d),{acm:P?P:c}}}})}();!function(e){"use strict";function t(){this.arr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",this.arrLen=this.arr.length}function n(){var e=p.getPtpInfoAndExtra(),t=c.getValue(s.pEventId);g.logData("p",t,e),s.EnableLogMoGuJs&&g.sendLog(s.LogMoGuJsUrl,e,!0)}function r(){if(o.info.isNative){var e=p.getPtpCnt();g.logAppPevent(e)}else l?n():c.listenTo("LoggerReady",function(){n()})}var o=e.logger={};o.version="0.1.10","undefined"==typeof console&&(window.console={log:function(){}});var i="**logger.js---鎵撶偣鍑洪敊:";!function(){var e=window.jQuery||window.Zepto,t=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]==t)return n+1;return-1},n={getA:function(e){var t=e;if("A"==t.tagName)return e;for(;t.parentNode;)if(t=t.parentNode,"A"==t.tagName)return t},getParentByClass:function(t,n){if(t){if(e)return $(t).parents("."+n);for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.className&&-1!=o.className.indexOf(n))return o}},getParents:function(t,n){if(t){if(n=n||"",e)return n="["+n+"]",$(t).parents(n)[0];for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.getAttribute&&o.getAttribute(n))return o}},getIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $("["+n+'="'+r+'"]').index($(o))+1;if(document.querySelectorAll){var i=document.querySelectorAll("["+n+'="'+r+'"]');return t(i,o)}return 1},getElemIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $(n).find(r).index($(o))+1;if(n.querySelectorAll){var i=n.querySelectorAll(r);return t(i,o)}return 1},is:function(e,t){return e&&t?(e.length&&(e=e[0]),e.nodeName.toLowerCase()===t.toLowerCase()?!0:void 0):!1}};o.jq=n}();var a=1001,u={},c={getIEVersion:function(){var e,t=-1,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))),t},stringify:function(e){if("undefined"!=typeof JSON)return JSON.stringify(e);var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,o=[],i=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=c.stringify(r)),o.push((i?"":'"'+n+'":')+String(r)));return(i?"[":"{")+String(o)+(i?"]":"}")},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},getCookieInArray:function(e){for(var t=0,n=e.length;n>t;t++){var r=c.getCookie(e[t]);if(r)return r}return""},getCookieOrFunc:function(e){return"function"==typeof e?c.getValue(e):c.getCookie(e)},getCookie:function(e){if(c.isArray(e))return c.getCookieInArray(e);var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},getQuery:function(e,t){void 0===t&&(t=location.search),t=t.split("#")[0];var n="(^|&|\\?)"+e+"=([^&]*)(&|$)",r=new RegExp(n,"i"),o=t.substr(1).match(r);return null!==o?decodeURIComponent(o[2]):""},setQuery:function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n},getTime:function(){return parseInt((new Date).getTime()/1e3)},registerEvent:function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},extend:function(){for(var e=arguments,t=arguments[0],n=1;n<e.length;n++){var r=e[n];for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},getValue:function(e){if(e){if("function"==typeof e)try{var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}catch(n){return console.log(i+n),""}return e}},loadScript:function(e,t){var n=document.createElement("script");n.src=e+"?callback=callback_"+a,window["callback_"+a]=function(e){t&&t(e)},a+=1;var r=document.getElementsByTagName("head")[0];r.appendChild(n)},listenTo:function(e,t){u[e]||(u[e]=[]),u[e].push(t)},fire:function(e){var t=u[e];if(t.length){for(var n=0,r=t.length;r>n;n++)t[n].call();u[e]=[]}},hasKey:function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}};o.util=c;var f="https:"===location.protocol?"https:":"http:",d="mogujie";-1!=location.host.indexOf("meilishuo")&&(d="meilishuo"),o.config={EnableLogMoGuJs:!0,LogUrl:f+"//log.juangua.com/log.php",LogMoGuJsUrl:f+"//log.juangua.com/mogu.js",CookieUrl:f+"//portal."+d+".com/api/util/getUuid",shouldRequestCookie:function(){if(-1!=location.protocol.indexOf("file:"))return!1;var e=o.util.getCookieOrFunc(o.config.uuid);return e?!1:!0},uuid:["__mgjuuid","__xduuid"],uid:"__ud_",sfrom:"from_site",cpsinfo:"__cpsinfo",ptp_cnt_a:"",ptp_cnt_b:"",ptp_cnt_c_d:"",platform:function(){var e=navigator.userAgent.toLowerCase();return/qq\/([\d\.]+)/.test(e)?48:void 0},pEventId:"1001",isMobileRe:/iphone|android|ipad/i,ptpRe:/[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+/i,hrefRe:/http[s]?:\/\/\w+\.(mogujie|xiaodian|uniny)\.com([\/]|\/.*|)$/,mgjRe:/mgj:\/\//,mtRe:/\?.*[&]?mt=([^\.]+)\.([^\.]+)\.([^\.&#]+)/,chasing:["f","f2","mlf"],urlExtend:["acm"],urlExtendFn:function(e){},extra:{},isNativeRe:/mogujie(?!nonative)/i,nativeLog:{}},window.PTP_PARAMS&&c.extend(o.config,PTP_PARAMS),t.prototype={rand:function(e){var t,n="";for(t=0;e>t;t++)n+=this.arr.charAt(Math.random()*this.arrLen);return n},pageHash:function(e){var t=5381,n=e.length-1;if("string"==typeof e)for(;n>-1;n--)t+=(t<<5)+e.charCodeAt(n);else for(;n>-1;n--)t+=(t<<5)+e[n];var r=2147483647&t,o="";do o+=this.arr.charAt(61&r);while(r>>=6);return o}},function(){var e=o.config,t=navigator.userAgent.toLocaleLowerCase();o.info={isApp:e.isNativeRe.test(t),isNative:e.isNativeRe.test(t),isMobile:e.isMobileRe.test(t),isIos:t.indexOf("iphone")>-1,isAndroid:t.indexOf("android")>-1,isXd:location.href.indexOf(".xiaodian.")>-1}}(),function(){function e(e,t){for(var n,r=0;r<e.length;r++)if(n=new RegExp(e[r]),n.test(t))return!0;return!1}o.needReferFix=!1;var t=navigator.userAgent.toLocaleLowerCase(),n=o.info.isApp&&o.info.isAndroid,r=-1!=t.indexOf("meilishuo"),i=-1!=t.indexOf("mogujie"),a=-1!=t.indexOf("referfix=1"),u=["^http://(m|www).mogujie.com/x6/wall/book/([a-z]+)/?(\\S*)$","^http://(m|www).mogujie.com/x6/marketchannel\\?(\\S*)$","^http://(m|www).mogujie.com/x6/detail/(\\w*)[\\?]?(\\S*)$","^http://(m|www).mogujie.com/x6/shop/(.*?)/goodsall[\\?]?(\\S*)$","^http://(m|www).mogujie.com/x6/account/getprofile[\\?].*?uid=(\\w*).*?$","^http://(m|www).mogujie.com/x6/attention/lifestyle[\\?].*?id=(\\w*).*?((ptp|url_ptp)=([\\w.]+))?$","^http://(m|www).mogujie.com/x6/shop/(\\w+)/?(\\?(.*))?$","^http://(m|www).mogujie.com/x6/book/([a-z]+)/?(\\S*)$","^http://(m|www).mogujie.com/x6/search/?\\?keywords=([^&]+)(\\S*)$"],c=["^https?://sgitem.meilishuo.com/sgdetail/(\\w+)/?\\??(.*?)$","^https?://item.meilishuo.com/h5/detail/(\\w+)/?\\??(.*?)$","^https?://www.mogujie.com/trade/order/detail4buyer\\?.*?orderId=(\\w+).*?$","^https?://www.mogujie.com/trade/refund/detail\\?.*?itemOrderId=(\\w+).*?$","^(http|https)://sgitemapp.meilishuo.com/sgdetail/(\\w+).*?$","^https?://act.meilishuo.com/keyword/?\\??(.*?)?$","^https?://weixin.meilishuo.com/wx/shop/(\\w+)/?\\??(.*?)$"];o.matchNativeLink=e;var f=function(t){return-1!=t.indexOf("mls://")?!0:e(c,t)},d=function(t){return-1!=t.indexOf("mgj://")?!0:-1==t.indexOf("/x6/")?!1:e(u,t)};o.isMgjNativeLink=d;var p=function(){var e="";if(n){if(a)return!0;var o=t.match(/\/(\d{3})\//);if(o&&o[1]){if(e=parseInt(o[1]),r&&832>=e)return!0;if(i&&806>=e)return!0}}return!1},s=function(e){return o.util.setQuery(e,"_isfilter","1")};o.needReferFix=p(),o.fixReferUrl=function(e){return r&&f(e)?e:i&&d(e)?e:s(e)}}(),function(){function e(){var e="1";return g.isMobile&&(e="m1"),g.isIos&&g.isNative?e="am0":g.isAndroid&&g.isNative&&(e="am1"),e}function n(){var e=c.getValue(s.ptp_cnt_b);if(e)return e;var t="",n=location.href.split("?")[0];return t=m.pageHash(n)}function r(){var e=c.getCookieOrFunc(s.cpsinfo);return e?e=e.replace("-",","):""}function i(){var e=c.getValue(s.platform);return e?e:g.isMobile?32:31}function a(e){if(e){var t=c.getValue(s.urlExtendFn,e);return c.hasKey(t)?t:void 0}}function u(e){if(e){var t=c.getValue(s.ptp_cnt_c_d,e);if(t)return t;var n=e.getAttribute("data-ptp-customc");if(n)return{c:n,d:l.getIndex("data-ptp-customc",n,e)};if(e=l.getParents(e,"data-ptp-customc"))return n=e.getAttribute("data-ptp-customc"),n?{c:n,d:l.getIndex("data-ptp-customc",n,e)}:void 0}}function f(){return{time:c.getTime(),sfrom:c.getCookieOrFunc(s.sfrom),uuid:c.getCookieOrFunc(s.uuid),uid:c.getCookieOrFunc(s.uid),cpsinfo:r(),refer:location.href,rerefer:document.referrer,ptp_url:c.getQuery("ptp",location.search),ptp_ref:c.getQuery("ptp",document.referrer)}}function d(){return{a:e(),b:n(),c:0,d:0,e:m.rand(5)}}var p,s=o.config,g=o.info,l=o.jq,m=new t,v=f(),h=d();o.ptp=p={getPtpByType:function(e,t){var n=i(),r=[v.time,0,"p/e",n,o.version,"1001",v.uuid,v.uid,v.refer,v.rerefer];return"p"==e?(t=t||"1001",r[2]="p",r[5]=t,r):"e"==e?(t=t||"50001",r[2]="e",r[5]=t,r):void 0},getPtpCnt:function(e,t){return e||(e=h.c),t||(t=h.d),[h.a,h.b,e,t,h.e].join(".")},getPtpInfo:function(){var e={};return c.extend(e,v,{ptp_cnt:p.getPtpCnt()})},getPtpInfoAndExtra:function(){var e=p.getPtpInfo(),t={};if(s.extra)for(var n in s.extra)s.extra.hasOwnProperty(n)&&(t[n]=c.getValue(s.extra[n]));return c.extend(e,t)},createPtpCnt:function(e){var t=u(e),n=0,r=0;if(t)return p.getPtpCnt(t.c,t.d);var o=l.getParents(e,"data-ptp"),i=l.getParentByClass(e,"data-ptp-item");return o&&(n=o.getAttribute("data-ptp"),r=i?l.getElemIndex(o,".data-ptp-item",i):l.getElemIndex(o,"a",e)),r||(r=0),p.getPtpCnt(n,r)},makeUrl:function(e,t,n){var r=e.match(/(#.+)$/);return e=e.replace(/(#.+)$/,""),e=c.setQuery(e,"ptp",t),e=p.getChasingParams(e),e=p.getExtendParams(n,e),o.needReferFix&&(e=o.fixReferUrl(e)),r&&(e+=r[1]),e},getChasingParams:function(e){void 0===e&&(e="");var t=e;if(!s.chasing)return t;s.chasing.length||(s.chasing=[s.chasing]);for(var n,r,o=0,i=s.chasing.length;i>o;o++)n=s.chasing[o],r=c.getQuery(n),r&&(t=c.setQuery(t,n,r));return t},getExtendParams:function(e,t){var n=t;if(!e||!l.is(e,"a"))return n;var r=a(e);if(r)for(var o in r)r.hasOwnProperty(o)&&(n=c.setQuery(n,o,r[o]));else{e.length&&(e=e[0]);for(var i=s.urlExtend||[],u=0,f=i.length;f>u;u++){var d=i[u],p=e.getAttribute("data-ext-"+d);p&&(n=c.setQuery(n,d,p))}}return n},refreshPtp:function(){v=f(),h=d()},refreshCookie:function(){v&&(v.sfrom=c.getCookieOrFunc(s.sfrom),v.uuid=c.getCookieOrFunc(s.uuid),v.uid=c.getCookieOrFunc(s.uid),v.cpsinfo=r())}}}(),function(){var e=o.info,t=o.ptp,n=o.config,r=0,a=function(e,t){t=t||{};var n=[];for(var r in t){var o=t[r];o||(o=""),o=encodeURIComponent(o),n.push(r+"="+o)}n=n.join("&"),e=e.indexOf("?")>-1?e+"&"+n:e+"?"+n;var i=new Image;i.src=e},u=function(e,t){t=t||{};var n,o=r++;try{n=document.createElement('<iframe name="'+o+'">')}catch(a){n=document.createElement("iframe"),n.setAttribute("name",o)}try{n.style.display="none",document.body.appendChild(n),n.contentWindow.name=o;var u=document.createElement("form");u.setAttribute("method","POST"),u.setAttribute("action",e),u.setAttribute("target",o);for(var f in t)if(t.hasOwnProperty(f)){var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name",f),d.setAttribute("value",t[f]),u.appendChild(d)}document.body.appendChild(u),u.submit(),c.registerEvent(n,"load",function(){try{document.body.removeChild(u),document.body.removeChild(n)}catch(e){}})}catch(a){console.log(i+a)}},f={sendLog:function(e,t,n){var r=c.getIEVersion(),o=-1!=r&&8>=r;o&&!n?u(e,t):a(e,t)},sendAppLog:function(e,t){return e+="",n.nativeLog&&n.nativeLog.logE?n.nativeLog.logE(e,t):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.tracker.sendEvent",e,t):document.addEventListener("deviceready",function(){window.mgj&&mgj.tracker&&mgj.tracker.sendEvent&&mgj.tracker.sendEvent(e,t)},!1))},logAppPevent:function(e){return n.nativeLog&&n.nativeLog.logP?n.nativeLog.logP(e):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.pevent",e).then(function(){},function(e){console.log("pevent:"+e)}):document.addEventListener("deviceready",function(){window.mgj&&mgj.pevent&&mgj.pevent(function(){},null,e)},!1))},logData:function(r,o,i){var a=t.getPtpByType(r,o);a.push(c.stringify(i)),e.isNative?f.sendAppLog(o,i):f.sendLog(n.LogUrl,{v:1,data:a.join("	")})}};o.send=f}(),function(){function e(e){var t=e.href;if(!(t.indexOf("mogujie.com/mtalk/")>-1)&&(n.hrefRe.test(t)||n.mgjRe.test(t))){var o=e.getAttribute("data-ptp-cache-id");t=e.getAttribute("href"),o&&n.ptpRe.test(o)||(o=r.createPtpCnt(e),e.setAttribute("data-ptp-cache-id",o)),e.href=r.makeUrl(t,o,e)}}function t(t){var n=t||window.event,r=n.target||n.srcElement,o=i.getA(r),a="AREA"===r.nodeName?r:null;a&&(o=a),o&&(o.href&&o.href.indexOf("javascript:")>-1||e(o))}var n=o.config,r=o.ptp,i=o.jq,a="tap"in document.createElement("div")?"tap":"mousedown";c.registerEvent(document,a,t),c.registerEvent(document,"touchstart",t)}();var p=o.ptp,s=o.config,g=o.send,l=!s.shouldRequestCookie();if(l||c.loadScript(s.CookieUrl,function(){l=!0,o.ptp.refreshCookie(),c.fire("LoggerReady")}),r(),o.refreshPevent=function(){o.ptp.refreshPtp(),r()},o.log=function(e,t){if(void 0!==e){t=t||{};var n=p.getPtpInfoAndExtra();l?o.send.logData("e",e,c.extend({},n,t)):c.listenTo("LoggerReady",function(){var n=p.getPtpInfoAndExtra();o.send.logData("e",e,c.extend({},n,t))}),window.MtaH5&&MtaH5.clickStat&&MtaH5.clickStat(e,t)}},o.generatePtpParams=function(e,t){if(void 0!==e){var n="";return n=t?p.createPtpCnt(t):p.getPtpCnt(),p.makeUrl(e,n,t)}},o.needReferFix&&document.referrer){var m=p.getPtpInfoAndExtra();o.log("016000616",{ptp_cnt2:m.ptp_cnt,ptp_url2:m.ptp_url,ptp_ref2:m.ptp_ref})}"undefined"!=typeof module&&"object"==typeof exports?module.exports=o:"function"==typeof define&&(define.amd||define.cmd)&&define("logger",function(){return o})}(window);"undefined"==typeof console&&(console={log:function(){}}),window.detePtp={triggerLog:function(){console.log("**************************:detePtp.triggerLog宸茬粡涓嶅啀鏀寔浜嗭紝璇峰敖蹇崲鐢ㄦ柊鐗堟墦鐐规帴鍙�")},logFromtSend:function(){console.log("**************************:detePtp.logFromtSend宸茬粡涓嶅啀鏀寔浜嗭紝璇峰敖蹇崲鐢ㄦ柊鐗堟墦鐐规帴鍙�")}};!function(){window.$&&window.require&&(window.modJsRequire=function(e,t,n,i){"function"==typeof t&&(n=arguments[1],i=arguments[2],t=null),require(e,function(){var e=Array.from?Array.from(arguments):Array.prototype.slice.call(arguments),i=this;t&&$(t).length?$(t).each(function(t,o){n&&n.apply(i,e.concat([o,t]))}):n&&n.apply(this,e)},i)})}(),define("core/core",[],function(){return MoGu={Config:{debug:"@DEBUG@"},version:"undefined@",appEnv:"Env",data:{},APP:{}},MoGu}),define("core/polyfill",["core/core"],function(e){return function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=+new Date,o=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+o)},o);return e=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),e}),define("core/cube/lazyload",["core/core","core/polyfill"],function(){var e=(navigator.userAgent,!1),t=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.clientWidth||document.body.clientWidth;$(window).resize(function(){t=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.clientWidth||document.body.clientWidth});var i=function(e){e.$container=e.$container||$(document.body),this.opts=$.extend({},this.defaults,e),this.opts.imgsCache=[],this.firstCheck=!1,this.imgQuality=70,this.imgKeyArr=["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],this.imgKeyMap={80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}},this.dpr=window.devicePixelRatio>=1?window.devicePixelRatio:1,this.dprDefMaxWidth=640,this.dprDefRatio="999",this.imgErrorClock={},this.init()};return i.prototype={defaults:{$scrollContainer:$(window),$container:$("body"),objsClassName:".J_dynamic_imagebox",objsWrapClass:".mod_row",objsLoadingClass:"J_loading",objsDataSrc:"img-src",showDistance:0,scrollThreshold:200},init:function(){var e=this,t=null;this.opts.$scrollContainer.on("scroll.globalScroll",function(n){clearTimeout(t),t=setTimeout(function(){e.firstCheck=!0,e.checkImages()},e.scrollThreshold)}),this._initCheckWebp()},_initCheckWebp:function(){var t=new Image,n=this;t.onload=function(){e=!0,n._firstCheckImages()},t.onerror=function(){e=!1,n._firstCheckImages()},t.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},_isValidViewElem:function(e){return"none"!=e.css("display")&&"hidden"!=e.css("visibility")&&0!=e.css("opacity")&&e.width()},_isInViewPort:function(e,t){var n=this._isValidViewElem(e);if(!n)return!1;var i,o,r,a,s=e[0],c=s.getBoundingClientRect&&s.getBoundingClientRect();c?(i=e.offset().top,o=i+e.height(),r=c.left,a=c.right):(i=e.offset().top,o=i+e.height(),r=e.offset().left,a=r+e.width());var u=o>=t.top&&i<=t.bottom,l=a>=t.left&&r<=t.right;return u&&l},refreshImgCache:function(e){var i=this.opts.$container,o=this.opts.$scrollContainer.scrollTop(),r=this.opts.showDistance,a=[],s=i.find(this.opts.objsWrapClass),c={};c.top=o-r,c.bottom=o+t+r,c.left=0,c.right=n,e&&(s=e);for(var u=0;u<s.length;u++){var l=s.eq(u);if(this._isInViewPort(l,c))for(var d=l.find(this.opts.objsClassName),f=0;f<d.length;f++){var g=d.eq(f),m=g.attr(this.opts.objsDataSrc);m&&"undefined"!==m&&"null"!==m&&this._isInViewPort(g,c)&&a.push(g)}}this.opts.imgsCache=a},_firstCheckImages:function(){var e=this.opts.$container;this.firstCheck=!0,this.checkImages(e)},checkImages:function(e){var t=this;this.opts.$container;t.firstCheck&&(this.refreshImgCache(e),window.requestAnimationFrame?window.requestAnimationFrame(function(){$(t.opts.imgsCache).each(function(e,n){$(n).attr(t.opts.objsDataSrc)&&(n.addClass(t.opts.objsLoadingClass),t.loadingImage.call(t,n))})}):$(t.opts.imgsCache).each(function(e,n){$(n).attr(t.opts.objsDataSrc)&&(n.addClass(t.opts.objsLoadingClass),t.loadingImage.call(t,n))}))},loadingImage:function(e){var t=this;t.addSuffix(e);var n=new Image,i=e.attr(this.opts.objsDataSrc),o=t.getWebpUrl(i);t.imgErrorClock[o]>=5||(n.src=o,n.complete?e.hasClass(this.opts.objsLoadingClass)&&(e.removeClass(this.opts.objsLoadingClass),e.removeAttr(this.opts.objsDataSrc),e.append('<img src="'+n.src+'" alt=""/>')):(n.onload=function(){e.hasClass(t.opts.objsLoadingClass)&&(e.removeClass(t.opts.objsLoadingClass),e.removeAttr(t.opts.objsDataSrc),e.append('<img src="'+n.src+'" alt=""/>'))},n.onerror=function(){t.imgErrorClock[o]?t.imgErrorClock[o]++:t.imgErrorClock[o]=1}))},getWebpUrl:function(t){var n="_999x999.v1c0.";if(-1===t.indexOf("mogucdn"))return t;if(!t||t.indexOf(".jpg")<0||t.indexOf(".webp")>0||t.indexOf(".png")>0||t.indexOf(".gif")>0)return t;if(t.indexOf(".jpg_")<0&&t.indexOf(".jpg")==t.length-4&&(t+=n+"jpg"),!e)return t;if(t.indexOf(".jpg_")>0){var i=t.split(".");if("jpg"==i[i.length-1])return i[i.length-1]="webp",i.join(".")}return t},getGoodsDprCode:function(e){var t=this,n="",i=".v1cAC";switch(e.attr("suffix-ratio")){case"1:1":case"7:9":case"3:4":case"2:3":n=e.attr("suffix-ratio");break;default:n=t.dprDefRatio,i=".v1c96"}var o=parseInt(e.attr("suffix-width")||e[0].offsetWidth)*t.dpr;(!o||0>o||o>t.dprDefMaxWidth)&&(o=t.dprDefMaxWidth);for(var r=0;r<t.imgKeyArr.length;r++){var a=t.imgKeyArr[r];if(a>=o||a==t.dprDefMaxWidth)return t.imgKeyMap[a][n]+i}return!1},addSuffix:function(e){var t=this,n=e.attr("suffix-model"),i="",o="."+t.imgQuality+".";switch("no"==e.attr("add-quality")&&(o="."),n){case"add_code":i=$.trim(e.attr("suffix-code"));break;case"orig_narrow":window.devicePixelRatio<2&&(i="50000x50000.v1c7E");break;case"goods_dpr":i=t.getGoodsDprCode(e);break;default:return!1}e.attr("suffix-model","end");var r=e.attr("img-src");if(!r||!i||r.indexOf(".webp")>0||r.indexOf(".gif")>0)return!1;if(i="_"+i,r.indexOf(".jpg")<0&&r.indexOf(".png")<0)return!1;if(r.indexOf(".jpg_")>0||r.indexOf(".png_")>0)return!1;var a="",s=r.split(".");if("jpg"==s[s.length-1])a="jpg";else{if("png"!=s[s.length-1])return!1;a="png"}return e.attr("img-src",r+i+o+a),!0},destroy:function(){$(window).off("scroll.globalScroll")}},$(function(){MoGu.DynamicImage=i,MoGu.dynamicImage=new MoGu.DynamicImage({$container:$(document.body),showDistance:600})}),MoGu}),define("lib/doT",[],function(){function e(){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(t,function(t){return e[t]||t}):this}}function t(e,n,i){return("string"==typeof n?n:n.toString()).replace(e.define||r,function(t,n,o,r){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in i||(":"===o?(e.defineParams&&r.replace(e.defineParams,function(e,t,o){i[n]={arg:t,text:o}}),n in i||(i[n]=r)):new Function("def","def['"+n+"']="+r)(i)),""}).replace(e.use||r,function(n,o){e.useParams&&(o=o.replace(e.useParams,function(e,t,n,o){if(i[n]&&i[n].arg&&o){var r=(n+":"+o).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[r]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+o+"$2"),t+"def.__exp['"+r+"']"}}));var r=new Function("def","return "+o)(i);return r?t(e,r,i):r})}function n(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var i={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};String.prototype.encodeHTML=e();var o={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},r=/$^/;return i.template=function(a,s,c){s=s||i.templateSettings;var u,l,d=s.append?o.append:o.split,f=0,g=s.use||s.define?t(s,a,c||{}):a;g=("var out='"+(s.strip?g.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):g).replace(/'|\\/g,"\\$&").replace(s.interpolate||r,function(e,t){return d.start+n(t)+d.end}).replace(s.encode||r,function(e,t){return u=!0,d.start+n(t)+d.endencode}).replace(s.conditional||r,function(e,t,i){return t?i?"';}else if("+n(i)+"){out+='":"';}else{out+='":i?"';if("+n(i)+"){out+='":"';}out+='"}).replace(s.iterate||r,function(e,t,i,o){return t?(f+=1,l=o||"i"+f,t=n(t),"';var arr"+f+"="+t+";if(arr"+f+"){var "+i+","+l+"=-1,l"+f+"=arr"+f+".length-1;while("+l+"<l"+f+"){"+i+"=arr"+f+"["+l+"+=1];out+='"):"';} } out+='"}).replace(s.evaluate||r,function(e,t){return"';"+n(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),u&&s.selfcontained&&(g="String.prototype.encodeHTML=("+e.toString()+"());"+g);try{return new Function(s.varname,g)}catch(m){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+g),m}},i.compile=function(e,t){return i.template(e,null,t)},i}),define("ui/ui",["$","lib/doT"],function(e,t){return MoGu.ui={showMask:function(){e("#M_Mask").show()},hideMask:function(){e("#M_Mask").hide()},showLoading:function(){e("#M_Loading").show()},hideMask:function(){e("#M_Loading").hide()},goTop:function(){},getTemplate:function(e,n){try{return t.template(e)(n)}catch(i){return i}},getdoT:function(){return t}},MoGu}),define("lib/store.js",[],function(){function e(){try{return s in o&&o[s]}catch(e){return!1}}function t(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(i),u.appendChild(i),i.addBehavior("#default#userData"),i.load(s);var n=e.apply(r,t);return u.removeChild(i),n}}function n(e){return e.replace(f,"___")}var i,o=window,r={},a=o.document,s="localStorage",c="__storejs__";if(r.disabled=!1,r.set=function(){},r.get=function(){},r.remove=function(){},r.clear=function(){},r.transact=function(e,t,n){var i=r.get(e);null==n&&(n=t,t=null),"undefined"==typeof i&&(i=t||{}),n(i),r.set(e,i)},r.getAll=function(){},r.serialize=function(e){return JSON.stringify(e)},r.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},e())i=o[s],r.set=function(e,t){return void 0===t?r.remove(e):(i.setItem(e,r.serialize(t)),t)},r.get=function(e){return r.deserialize(i.getItem(e))},r.remove=function(e){i.removeItem(e)},r.clear=function(){i.clear()},r.getAll=function(){for(var e={},t=0;t<i.length;++t){var n=i.key(t);e[n]=r.get(n)}return e};else if(a.documentElement.addBehavior){var u,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write('<script>document.w=window</script><iframe src="/favicon.ico"></iframe>'),l.close(),u=l.w.frames[0].document,i=u.createElement("div")}catch(d){i=a.createElement("div"),u=a.body}var f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");r.set=t(function(e,t,i){return t=n(t),void 0===i?r.remove(t):(e.setAttribute(t,r.serialize(i)),e.save(s),i)}),r.get=t(function(e,t){return t=n(t),r.deserialize(e.getAttribute(t))}),r.remove=t(function(e,t){t=n(t),e.removeAttribute(t),e.save(s)}),r.clear=t(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(s);for(var n,i=0;n=t[i];i++)e.removeAttribute(n.name);e.save(s)}),r.getAll=t(function(e){for(var t,i=e.XMLDocument.documentElement.attributes,o={},a=0;t=i[a];++a){var s=n(t.name);o[t.name]=r.deserialize(e.getAttribute(s))}return o})}try{r.set(c,c),r.get(c)!=c&&(r.disabled=!0),r.remove(c)}catch(d){r.disabled=!0}return r.enabled=!r.disabled,r}),define("utilExtend",["lib/store.js"],function(e){return{inputTextHide:function(e,t){e.focus(function(){var e=$(this);$.trim(e.val())==$.trim(e.attr("def-v"))&&e.val(""),t&&e.addClass(t)}),e.blur(function(){var e=$(this);""==$.trim(e.val())&&(e.val(e.attr("def-v")),t&&e.removeClass(t))})},getStore:function(){return e}}}),define("util/util",["$","utilExtend"],function(e,t){return MoGu.util={setCookie:function(e,t,n){n=n||{},null===t&&(t="",n.expires=-1);var i="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var o;"number"==typeof n.expires?(o=new Date,o.setTime(o.getTime()+864e5*n.expires)):o=n.expires,i="; expires="+o.toUTCString()}var r=n.path?"; path="+n.path:"",a=n.secure?"; secure":"",s="";n.domain?s="; domain="+n.domain:(s=document.domain.toString().split("."),s="; domain=."+s[1]+"."+s[2]),document.cookie=[e,"=",encodeURIComponent(t),i,r,s,a].join("")},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},removeCookie:function(e){MGTOOL.setCookie(e,null,{expires:-1})}},e.extend(MoGu.util,t),MoGu}),define("MoGu/ua",["core/core"],function(e){var t=navigator.userAgent,n=t.match(/(iPad).*OS\s([\d_]+)/),i=t.match(/(iPod)(.*OS\s([\d_]+))?/),o=!n&&t.match(/(iPhone\sOS)\s([\d_]+)/),r=n||i||o,a=t.match(/(Android)\s+([\d.]+)/),s=r||a,c=t.indexOf("MSIE")>0,u=$.browser.msie&&"6.0"==$.browser.version&&!$.support.style,l=t.match(/Chrome\/([\d.]+)/);return e.os={ipad:n,ipod:i,iphone:o,is_ios:r,is_and:a,is_mobile:s,is_ie_old:c,is_ie6:u,isChrome:l},e}),define("fn/fn",["core/core"],function(){return MoGu.fn={login:function(e){e=e||window.location.href;var t="http://portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(e);window.location.href=logger&&logger.generatePtpParams(t)||t},idtourl:function(e){return e?1+(2*e+56).toString(36):void 0},urltoid:function(e){return(parseInt(e.substring(1),36)-56)/2},walkThrough:function(e,t){t=t||window;var n=(e||"").split("."),i=!!n.length;return $(n).each(function(e,n){return i=i&&null!==t[n]&&void 0!==t[n],i===!1?i:void(t=t[n])}),i},cAjax:function(e,t){return $.ajax(e,t)}}}),define("fn/time",["fn/fn"],function(){var e,t=!1,n=!1,i=function(){window.console&&window.console.log&&window.console.log("get server time error"),$(window).trigger("getServerTime",new Date),t=!0,e=new Date},o=function(){return $.ajax({url:"http://time.mogujie.com/time.php",type:"GET",timeout:10002,dataType:"jsonp",jsonpCallback:"jquery_get_time_ver1"})},r=function(){o().done(function(n){if(n&&n.result&&n.result.time){var o=new Date(1e3*n.result.time);$(window).trigger("getServerTime",o),t=!0,e=o}else i()}).fail(i)};MoGu.fn=$.extend({},MoGu.fn,{forceGetRealTime:function(){o().done(function(e){if(e&&e.result&&e.result.time){var t=new Date(1e3*e.result.time);callback(t)}else callback(new Date)}).fail(function(){callback(new Date)})},getServerTime:function(i){n||(r(),n=!0),t?i(e):$(window).on("getServerTime",function(e,t){i(t)})}})}),define("fn/showlog",["fn/fn"],function(){function e(e){return"none"!=e.css("display")&&"hidden"!=e.css("visibility")&&0!=e.css("opacity")&&e.width()&&(e.height()||e.innerHeight&&e.innerHeight())}function t(t){var n=t.offset().top,i=t.height()||t.innerHeight&&t.innerHeight(),o=t.offset().left,r=t.width(),a=$(window).scrollTop(),s=$(window).scrollLeft(),c=$(window).width(),u=$(window).height(),l=n>=a&&a+u>n,d=n+i>a&&a+u>=n+i,f=a>n&&n+i>a+u,g=o>=s&&s+c>o,m=o+r>s&&s+c>=o+r,p=s>o&&o+r>s+c;return e(t)&&(l||d||f)&&(g||m||p)}function n(){if(w.length||b.length||A.length||C.length||v){var e=function(){b&&b.length?(S("0x00000000",{acms:b,indexs:p,type:5}),p=[],b=[]):A&&A.length?(S("0x00000000",{acms:A,indexs:h,type:5}),h=[],A=[]):C&&C.length?(S("70500",{acms:C,indexs:x,iids:y,type:4}),y=[],x=[],C=[]):v?(S(m||70500,v),v=null,m=null):w&&w.length&&(S(m||70500,{acms:w,iids:y,indexs:_}),w=[],y=[],_=[],m=null)};e()}$("."+o).length?(i=!0,window.setTimeout(n,1e3)):i=!1}var i=!1,o="rec-show-log",r="module_row",a="cube-acm-node",s="has-log-mod",c="show-log-item",u="log-custom",l="waiting-log",d="data-log-content",f="data-log-iid",g="data-log-index",m=($("."+o),null),p=[],h=[],x=[],w=[],v=null,b=[],A=[],C=[],y=[],_=[],S=function(e,t){var n=window&&window.logger&&window.logger.log;n&&n(e,t)},M=function(e){var t=e.attr(d),n=t.split(";");$(n).each(function(e,t){var n=t.split("="),i=n[0];i&&(v=v||{},v[i]=v[i]||[],v[i].push(t.replace(i+"=","")))})},j=function(){$("."+r).each(function(e,n){var i=$(n),o=i.attr("data-acm")||"",r=o.split(".");if(o&&t(i)){var c=i.find("."+a+",.anchor"),l=c.length;i.hasClass(s)||(b.push(o+"-mfs_"+l),p.push(e),i.addClass(s)),l&&$(c).each(function(e,n){var i=$(n),a=!i.hasClass(u)&&i.attr("data-log-content")||"",c=i.attr(f)||"";!i.hasClass(s)&&t(i)&&(a&&r[6]?(C.push(a+"-"+r[6]+"-idx_"+e+"-mfs_"+l),x.push(e),c&&y.push(c),i.addClass(s)):(A.push(o+"-idx_"+e+"-mfs_"+l),h.push(e),i.addClass(s)))})}}),$("."+o).each(function(e,n){if(t($(n))||$(n).hasClass(l)){var i=$(n).find("."+c);$(n).removeClass(l),i.length?$(i).each(function(e,i){var o=$(i);if(t(o)||o.hasClass(l)){if(o.removeClass(l),m&&m!==$(n).data("eventid"))return $(n).addClass(l),void o.addClass(l);o.hasClass(u)&&M(o),m=$(n).data("eventid"),o.removeClass(u).removeClass(c).removeAttr(d).removeAttr(f).removeAttr(g)}}):$(n).removeClass(o)}}),(w.length||b.length||A.length||C.length||v)&&!i&&n()},k=function(){$(function(){window.setTimeout(function(){$(window).scroll(j)},1e3)})};k(),MoGu.fn=$.extend({},MoGu.fn,{showLog:j})}),define("base/MoGu",["core/core","core/polyfill","lib/doT","core/cube/lazyload","util/util","ui/ui","fn/time","fn/showlog","MoGu/ua"],function(e){return e}),require(["base/MoGu"],function(e){return e});$.fn.listenToLazyData=function(a){var t=$(this).data("source-key");return MoGu&&MoGu.lazyInstance&&MoGu.lazyInstance._cache&&MoGu.lazyInstance._cache[t]?void a({},!0,"",t,MoGu.lazyInstance._cache[t]||[],!1):void $(this).one("receive-data",a)},define("base/core/datalazy",["ui/ui"],function(a){function t(a){window.console&&console.warn&&console.warn.apply&&console.warn.apply&&console.log.apply(console,arguments)}function e(a){window.console&&console.error&&console.error.apply&&console.error.apply(console,arguments)}function o(a,t,e){var o=a.top,n=o+a.height;return e=e||0,t-e>n||o>t+f+e?!1:!0}function n(a){return"none"!=a.css("display")&&"hidden"!=a.css("visibility")&&0!=a.css("opacity")&&a.width()}function r(t,e,o){var n=t.find("#template-tpl").html(),r=a.ui.getTemplate(n,e||[]),c=t.find(t.data("placeholder")||".entry-wrap");o?c.append(r):c.html(r)}function c(a){!this instanceof c&&e("please new function"),this.init(a)}"function"!=typeof Object.assign&&!function(){Object.assign=function(a){"use strict";if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(a),e=1;e<arguments.length;e++){var o=arguments[e];if(void 0!==o&&null!==o)for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])}return t}}(),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=e.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var r,c,s=[];for(r in n)a.call(n,r)&&s.push(r);if(t)for(c=0;o>c;c++)a.call(n,e[c])&&s.push(e[c]);return s}}()),Array.prototype.forEach||(Array.prototype.forEach=function(a,t){var e,o;if(null==this)throw new TypeError("this is null or not defined");var n=Object(this),r=n.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(e=t),o=0;r>o;){var c;o in n&&(c=n[o],a.call(e,c,o,n)),o++}});var s={dynamic:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},merge:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},appolo:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},mce:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},mceats:{url:"http://mce.mogucdn.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"},mceonline:{url:"http://mce.mogujie.com/jsonp/multiget/3",backupUrl:"http://mcebackup.mogucdn.com/jsonp/get/3",param:"pids",backupParam:"pid",type:"jsonp"}},i="",u=20,p=20,l=80,d={loading:1,success:2,paging:3,error:4},f=$(window).height();return c.DEFAULT_CONFIG={timeout:1e4,deviation:f,SELECTORS:{COLD:".coldData",AJAX:".lazyData"}},c.prototype={_cache:{},_ajaxMap:{},_hasReRendered:!1,handler:null,destory:function(){$(window).off("scroll touchmove resize",this.handler)},init:function(a){var t=this;this.config=$.extend({},c.DEFAULT_CONFIG,a),this.loadStaticData(),this.prepareAjaxData(),this.loadAjaxData(),this.handler=function(){t.loadAjaxData.call(t)},$(window).on("scroll touchmove resize",this.handler)},loadStaticData:function(){var a=this._cache,e=this.config.SELECTORS;$(e.COLD).each(function(){var e=$(this),o=e.data("source-key"),n=a[o];n&&t(o,"already exist, will be overwrite in cache");var c=null;try{var s=e.find(".code-data");c=JSON.parse(s.html()),s.remove()}catch(i){t(o,"opps...seems your json data is wrong"),c=null}c&&$.extend(a,c),n=a[o],e.data("manual")||(r(e,n),$(window).trigger("scroll")),setTimeout(function(){e.trigger("receive-data",[!0,"",o,n])},30)})},prepareAjaxData:function(a){var e=this.config.SELECTORS,o=$(e.AJAX),n=this,r=0,c=1,d=o.length,f=a?""+parseInt(100*Math.random()):"";this.$elems=o,o.each(function(a){var e=$(this),o=e.data("source-type"),h=e.data("floornum")||p,m=e.offset();if(!s[o])return void t("unknown data source type",o);e.data("multi-page")&&a!==d-1&&(t("split page module should always be the last one"),e.data("multi-page",null)),(e.data("multi-page")||+e.data("length")>u)&&(o=o+":"+e.data("source-key")),r+=h,r>l&&(r=0,c++),o+=c,o+=f;var g=n._ajaxMap[o]=n._ajaxMap[o]||{source:s[e.data("source-type")],list:[],offset:m};g.list.push({key:e.data("source-key"),dom:e,offset:m,param:e.data("multi-page")?i:null}),m.top<g.offset.top&&$.extend(g.offset,m),e.data("source-type","")})},updateAjaxMap:function(a){if(a="boolean"!=typeof a?!1:a,this._hasReRendered&&(a=!0,this._hasReRendered=!1),a){var e=this._ajaxMap;Object.keys(e).forEach(function(a){var o=e[a],n=o.list;if(!o.status||o.status===d.paging)for(var r=0;r<n.length;r++){var c=n[r],s=c.dom,i=s.offset(),u=s.data("source-key");u||t("source-key of the current dom should exist"),u!==c.key&&t("source-key[",u,"] of the current dom should match",c.key),c.offset=i}})}},loadAjaxData:function(){this.updateAjaxMap();var a=this._ajaxMap,e=$(window).scrollTop(),c=this._cache,s=this;for(var u in a)!function(u){var p=a[u];if(!p.status||p.status===d.paging){for(var l=p.list,f=p.source,h=!1,m=0;!h&&m<l.length;m++)h=h||o(l[m].offset,e,s.config.deviation)&&n(l[m].dom);if(h){for(var g=[],m=0;m<l.length;m++)g.push(l[m].key);g=g.join(",");var y=function(a){var t=!1;if(1===l.length&&l[0].param){var e=g;a=a[e],l[0].param=a.mbook,p.status&&(t=!0),a.isEnd||p.status?c[e]=c[e].concat(a.list):(p.status=d.paging,c[e]=a.list),i.data("manual")||r(i,c[u],t),i.trigger("receive-data",[!0,"",u,a.list||[],t])}else{for(var e in a)a.hasOwnProperty(e)&&(a[e]=a[e].list);$.extend(c,a);for(var o=0;o<l.length;o++){var n=l[o],i=$(n.dom),u=n.key;c[u]&&(i.data("manual")||r(i,c[u]),i.trigger("receive-data",[!0,"",u,c[u]||[]]))}}(1===l.length&&l[0].param&&a.isEnd||!l[0].param)&&(p.status=d.success),setTimeout(function(){s._hasReRendered=!0,$(window).trigger("scroll")},50)},v=function(a){if(a&&a.success&&a.returnCode&&"SUCCESS"==a.returnCode){var t=a.data;y(t)}else j(new Error(a&&a.returnCode||"error interface"))},j=function(a){var e=null;if(!a)return e=$.Deferred(),e.resolve(null),e;if(t("use backup url due to",a.toString()),!f.backupUrl)return void t("no backupUrl");var o=$.ajax;$._ajax&&"jsonp"===f.type&&(o=$._ajax);var n=$.extend({},f.data),r=(g||"").split(",");$(r).each(function(a,t){n[f.backupParam]=t,o.call($,{url:f.backupUrl,type:"GET",dataType:"jsonp",cache:!0,beforeSend:function(a,e){e.url=e.url.substring(0,e.url.indexOf("?")),e.url+="%3Fpid="+t+"&callback=jsonp"+t+"backup"},jsonpCallback:"jsonp"+t+"backup",data:n}).then(function(a){b.call(this,a,t)})})},b=function(a,t){if(a&&a.success&&a.returnCode&&"SUCCESS"==a.returnCode){var e={};e[t]=a.data,y(e)}};p.status=d.loading;var k=$.ajax;$._ajax&&"jsonp"===f.type&&(k=$._ajax);var w={};$(".page_activity").hasClass("debug")&&(w=$.extend(w,{testing:1}));var x=$.extend(w,f.data);x[f.param]=g,l[0].param&&l[0].param!==i&&(x.mbook=l[0].param),k.call($,{url:f.url,type:"jsonp"!==f.type?f.type:"GET",dataType:"jsonp"!==f.type?"json":"jsonp",data:x,cache:!0,timeout:s.config.timeout,jsonpCallback:"jsonp"+g.replace(/,/g,"_")}).done(v).fail(j)}}}(u)}},c}),require(["base/MoGu","base/core/datalazy"],function(a,t){$(function(){var e=new t;return a.lazyInstance=e,a})});
