define("Countdown",function(){function t(t){return(10>t?"0":"")+t}function i(t){try{var i=t.offset().top,e=t.height(),o=t.offset().left,s=t.width(),n=$(window).scrollTop(),h=$(window).scrollLeft(),r=$(window).width(),a=$(window).height(),d=i>=n&&n+a>i,u=i+e>n&&n+a>=i+e,c=n>i&&i+e>n+a,l=o>=h&&h+r>o,p=o+s>h&&h+r>=o+s,f=h>o&&o+s>h+r;return(d||u||c)&&(l||p||f)}catch(m){return!0}}function e(t){return"none"!=t.css("display")&&"hidden"!=t.css("visibility")&&0!=t.css("opacity")&&t.width()}var o=function(t,i){this.$el=t,this.__hasStop=!1,i=$.extend({time:0,template:"{{=it.day}}:{{=it.hour}}:{{=it.minute}}:{{=it.second}}"},i),this.endTime=Math.round(new Date/1e3)+parseInt(i.time),this.templateFn=MoGu.ui.getdoT().template(i.template),this._setTime(),this._render()};return o.prototype._setTime=function(){var t=this.endTime-Math.floor(new Date/1e3);if(0>=t)this.day=this.hour=this.minute=this.second=0,this.stop();else{this.second=t%60,t=Math.floor(t/60),this.minute=t%60;var i=Math.floor(t/60);this.hour=i-24*Math.floor(i/24),this.day=Math.floor(i/24)}},o.prototype._tick=function(){return this.second--,i(this.$el)&&e(this.$el)?this.__hasStop?(this._setTime(),this.__hasStop=!1,void this._render()):(this._setTime(),void this._render()):void(this.__hasStop=!0)},o.prototype._render=function(){this.$el.html(this.templateFn({hour:t(this.hour),minute:t(this.minute),second:t(this.second),day:t(this.day)}))},o.prototype.start=function(){var t=this;this.timer=setInterval(function(){t._tick.call(t)},1e3)},o.prototype.stop=function(){clearInterval(this.timer)},o});define("module/base",[],function(){window._getQueryString=function(a,n){var n=n||window.location.search;if(!a){var r=n.substring(1,n.length).split(/[&=]/),e={};return $.each(r,function(a,n){a%2===0&&(e[n]=r[a+1])}),e}var t=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),o=n.substr(1).match(t);return null!=o?unescape(o[2]):null},window._getWallParam=function(a){var n="",r=$('.param_container .ajax_param[param-name|="'+a+'"]');return r.length>0&&(n=r.val()),n},window._setWallParam=function(a,n){var r=$('.ajax_param[param-name|="'+a+'"]');r.length>0?r.val(n):$(".param_container").append('<input type="hidden" class="ajax_param" param-name="'+a+'" value="'+n+'" />')},window._getWallAllParams=function(){var a={},n=$(".param_container").find(".ajax_param");return n.each(function(){var n=$(this);n.attr("param-name")&&(a[n.attr("param-name")]=n.val())}),a},window._setWallAllParams=function(a){$.map(a,function(a,n){_setWallParam(n,a)})},window._getCookie=function(a){var n,r=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(n=document.cookie.match(r))?unescape(n[2]):null},window._isEmptyObject=function(a){for(var n in a)return!1;return!0},window._getValueInObj=function(a,n){var r=$.map([].concat(n),function(n){var r=a,e=[];$.map(n.split(/\.|\[|\]|'|"/),function(a){""!==a&&e.push(a)});try{$.map(e,function(a){r=r[a]})}catch(t){window.console&&console.error&&console.error(t)}return r});return $.isArray(n)?r:r[0]},window._scrollTop=function(a){$(window).scrollTop(a)}}),require(["module/base"],function(){});define("module/temp",function(){function a(a,t){return a+(t||"#common_goods_wall")}function t(a){return null===a||"undefined"==typeof a?"":a}var e={ajaxParams:function(a,t){return'<input type="hidden" class="ajax_param" param-name="'+a+'" value="'+t+'" autocomplete="off">'},nav:{container:function(a,t){},sort:function(a,t){},definedPrice:function(a,t){},price:function(a,t){},tags:function(a,t){}},goods:{getGoodsHtml:function(a,t,e){},getWedgeImgHtml:function(a,t){},noGoods:function(a,t){}},pageTags:{dom:function(a,t){}}};e.nav.container=function(t){var e=t.result.wall,n=e.pager.url;if(n){var r=n.match("\\?[^/]*$","ig")?n.match("\\?[^/]*$","ig")[0].substr(1):"",o=n.replace(self.urlParams,""),s=new RegExp("#[\\w]+","ig"),l=i(s,r);""!==l&&"&"!==l.charAt(0)&&(l="&"+l),o=i(s,o);var c=a(o+l).replace("_page_","1"),d=t.result.param?t.result.param.ptpPartC:null;return['<form data-ptp-customc="'+d+'_tagList" action="'+c+'" class="price_custom" method="GET" >','<div class="sp_filter clearfix sort_nav">','<div class="nav_left fl clearfix">',"</div>",'<div class="nav_right fl clearfix">',"</div>","</div>","</form> "].join("")}},e.nav.sort=function(t,e){var i=t.result.sortList,n="";return $.each(i,function(t,i){n+='<a data-ptp-customc="'+e+'_sortList" sort-key="'+i.sortKey+'" class="sort fl" href="'+a(i.url)+'" data-mark="sort" tab-index="'+t+'">'+i.title+"</a>"}),""!==n?'<div class="sort_container fl">'+n+"</div>":""},e.nav.definedPrice=function(){return['<div class="price fl">','<div class="txt">','<span class="rmb">￥</span>','<input type="text" class="from" value="" name="minPrice">',"</div>",'<span class="divid">-</span>','<div class="txt">','<span class="rmb">￥</span>','<input type="text" class="to" value="" name="maxPrice">',"</div>",'<a class="sbt definedprice" href="#" data-mark="definedPrice">确定</a>',"</div>"].join("")},e.nav.price=function(t,i,n){var r=(e.nav,t.result.priceList),o="";return $.map(r,function(t,e){var r=n.replace("_minPrice_",t.min).replace("_maxPrice_",t.max);o+=['<li class="price_citem">',"<a data-ptp-customc='"+i+"_priceList' href='"+a(r)+"' data-mark='price'>"+t.min+"-"+t.max+"</a>","</li>"].join("")}),""!==o?'<ul class="price_choice fl">'+o+"</ul>":""};var i=function(a,t){var e=t.match(a);return e&&$.each(e,function(a){t=t.replace(e[a],"")}),t};e.nav.tags=function(a,i){var n=e.nav;n.urlParams=location.search;var r=a.result.tagList,o="",s=t(_getWallParam("tag"));return tagsStr=""===s?[]:s.split(","),$.map(r,function(a,t){var e=$.inArray(a.postkey,tagsStr)>=0?"checked":"";o+=['<a class="mgl" data-mark="tags" href="">',"<input "+e+' type="checkbox" value="'+a.postkey+'">','<label for="tag'+a.postkey+'">'+a.name+"</label>","</a>"].join("")}),['<div class="nav_inner fl">','<span class="nav_more"></span>','<div class="filters">','<input type="hidden" class="tagStr" value="" name="tag" data-ptp-customc="'+i+'_tagList">',o,"</div>","</div>"].join("")},e.goods={isOnlyNormalGoods:!1,getItemHtml:function(a,t,e){if(a.type){if(this.isOnlyNormalGoods&&2!=a.type)return!1;switch(a.type){case 1:return this.getWedgeImgHtml(a,e);case 2:return this.getGoodsHtml(a,t,e);default:return!1}}return this.getGoodsHtml(a,t,e)},getGoodsHtml:function(a,t,e,i){var n='suffix-model="add_code" suffix-code="240x360.v1cAC"',r=_getWallParam("ratio");r&&(n='suffix-model="goods_dpr" suffix-ratio="'+r+'"');var o="";if($.each(a.leftbottom_taglist||[],function(a,t){o+='<img src="'+t+'" alt="" class="tagImage" style=""/>'}),1===a.activity)var s='<img src="'+a.activity_img+'" style="">';else if(a.lefttop_taglist){var s="",l=.5;$.each(a.lefttop_taglist,function(a,t){s+='<img src="'+t.img+'" style="width:'+Math.round(t.w*l)+'px;height:auto;">'})}var c="";a.hasSimilarity&&(c=['<a class="likeLink" href="'+a.similarityUrl+'" target="_blank">找相似&nbsp;','<img src="http://s16.mogucdn.com/p1/151209/upload_ie3wmyrvhftdmyzvguzdambqgayde_7x13.png">',"</a>"].join("")),a.link.indexOf("acm")<0&&(a.link=a.link+(a.link.indexOf("?")>0?"&":"?")+"acm="+a.acm+"-"+i);var d=a&&a.index?a.index:"";return['<div class="iwf goods_item" data-tradeitemid="'+a.tradeItemId+'" goods-index="'+d+'" >',c,'<a rel="nofollow" href="'+a.link+'" class="img J_dynamic_imagebox loading_bg_120" target="_blank" '+n+'  img-src="'+a.img+'" need-remove="no" data-ptp-customc="'+e+t+'" >',s?'<span class="icon_event_lefttop iwf_icon_taglist">'+s+"</span>":"","</a>",'<a rel="nofollow" target="_blank" href="'+a.link+'" class="goods_info_container">','<p class="title fl" style="',""===o?"height:44px;":"height:22px; white-space: nowrap; text-overflow: ellipsis;",'">'+a.title+"</p>",""!==o?'<p class="icon_event_leftBottom">'+o+"</p>":"",'<div class="goods_info fl">','<b class="price_info yahei">¥'+a.price+"</b>",'<span class="fav_num fr">'+a.cfav+'<img src="http://s18.mogucdn.com/p2/160908/upload_27g4f1ch6akie83hacb676j622b9l_32x30.png" alt=""></span>',"</div>","</a>","</div>"].join("")},getWedgeImgHtml:function(a,t){return['<div class="iwf">','<a rel="nofollow" href="'+a.link+'" class="img J_dynamic_imagebox" target="_blank" suffix-model="orig_narrow" ','img-src="'+a.image+'" need-remove="no" data-ptp-customc="'+t+'_wall_mait_source" style="width:100% !important;height:100% !important;">',"</a>","</div>"].join("")},noGoods:function(){return['<div class="selection_box search_noresult">',"<p>筛选条件太多啦，未找到相关结果</p>",'<a href="javascript:;" onclick="if(window.history){history.back();}else{self.location=document.referrer;}" class="backlast">点击返回上一步</a>',"</div>"].join("")},noMore:function(){return'<div id="like_list_nomore"><div>没有更多啦~</div></div>'},searchNoGoods:function(a){return['<div class="selection_box search_noresult">','<p class="search_nr_img"><img src="http://s18.mogucdn.com/p1/150917/upload_ieztizdegrsdkmlcgmzdambqgyyde_100x100.png"></p>','<p class="search_nr_desc">没有找到与“<span>'+a+"</span>”相关的商品</p>","</div>"].join("")}},e.pageTags.dom=function(a,t){var i=e.pageTags,r=n(t),o=a.result;i.nowPageNo=parseInt(_getWallParam("page"))||parseInt(_getQueryString("page"));var s=parseInt(o.wall.pager.total),l=parseInt(o.wall.pager.perPage);if(i.nowPageNo&&s&&l){var c=Math.ceil(s/l);c=c>100?100:c;var d,p,m="";if(i.nowPageNo>1&&(m+=r(i.nowPageNo-1,"&lt;")),7>c){d=1,p=c;for(var g=d;p>=g;g++)m+=r(g,g)}else{m+=r(1,1),i.nowPageNo>=1&&i.nowPageNo<=3?(d=2,p=5):i.nowPageNo>=c-2&&i.nowPageNo<=c?(d=c-4,p=c-1):(d=i.nowPageNo-2,p=i.nowPageNo+2),d>2&&(m+="<i>...</i>");for(var g=d;p>=g;g++)m+=r(g,g);c-1>p&&(m+="<i>...</i>"),m+=r(c,c)}return i.nowPageNo<c&&(m+=r(i.nowPageNo+1,"下一页&gt;")),'<div class="pagination pd_tb" style="display:none;">'+m+"</div>"}};var n=function(a){var t=e.pageTags;return function(e,i){var n=a.replace(/(_page_)/gi,e),r=e===t.nowPageNo?"c":"";return"<a href='"+n+"' rel='nofollow' class="+r+">"+i+"</a>"}};return MoGu.wall=MoGu.wall||{},MoGu.wall.temp=MoGu.wall.temp||e,e});require(["module/base"],function(){function o(o){o=o||32;for(var t="abcdefhijkmnprstwxyz2345678",a=t.length,n="",e=0;o>e;e++)n+=t.charAt(Math.floor(Math.random()*a));return n}var t=100,a=Date.now||function(){return(new Date).getTime()},n={opts:{objsClassName:"J_mod_hidebox",showCallback:null,showDistance:800},randomIdName:"",randomIdNum:0,modInner:{},init:function(){var n=this,e=$("."+n.opts.objsClassName);e.addClass("J_mod_show"),n.randomIdName="J_Dynmod_"+o(8)+"_";var d=a();$(window).scroll(function(o){var e=a();e-d>t&&(d=e,n.checkMod())})},checkMod:function(o){for(var t=o?o:$("body"),a=this,n=document.documentElement.scrollTop||document.body.scrollTop,e=t.find("."+a.opts.objsClassName),d=n-a.opts.showDistance,s=n+(document.documentElement.clientHeight||document.body.clientHeight)+a.opts.showDistance,m=e.length,i=0;m>i;i++){var c=e.eq(i),r=c.offset().top,h=r+c.height(),l=h>=d&&s>=r,u=""==!c.html();u&&c.addClass("J_mod_show"),!l&&u&&a.resetMod(c,"hide"),l&&!u&&a.resetMod(c,"show")}a.opts.showCallback&&a.opts.showCallback(),setTimeout(function(){MoGu.dynamicImage&&MoGu.dynamicImage.checkImages()},66)},resetMod:function(o,t){var a=this,n=a.modInner;o.attr("id")&&""!=o.attr("id")||(o.attr("id",a.randomIdName+a.randomIdNum),a.randomIdNum++),"hide"==t?(o.find(".J_loading").removeClass("J_loading"),o.find(".J_dynamic_img").attr("style",""),n[o.attr("id")]=o.html(),o.css({height:o.height()}),o.removeClass("J_mod_show"),o.html("")):(o.addClass("J_mod_show"),o.html(n[o.attr("id")]),o.css({height:"auto"}))},showCallback:function(){}};window.MoGu=window.MoGu||{},MoGu.dynamicDom||(n.init(),MoGu.dynamicDom=n),MoGu.dynamicDom=MoGu.dynamicDom||n});define("module/AjaxWallLoader",["module/base","module/temp"],function(a,o){window.MoGu=window.MoGu||{};var i=navigator.userAgent,t=i.indexOf("MSIE")>0,l=Date.now||function(){return(new Date).getTime()},e=t?200:50,n=function(a){var o={wallobj:$("#wall_goods_box"),bottomHeight:2e3,ajaxSuccBack:null,getItemHtmlFun:null,itemPackageNumMax:40};this.options=$.extend(o,a)||{},this.isLoading=!1,this.ajaxData={},this.isAjaxEnd=!1,this.container=null,this.emptyClick=0,this.itemPackageHtml="",this.itemPackageNum=0,this.itemIndex=0};return n.prototype={initLoaderTimer:function(){var a=this;a.container=a.options.wallobj.find(".J_scroll_wallbox"),a.isAllowAjax();var o=l();$(window).scroll(function(i){var t=l();t-o>e&&(o=t,a.isAllowAjax())})},isAllowAjax:function(){var a=this;if(!a.isAjaxEnd&&!a.isLoading){var o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;o+$(window).height()>$(document).height()-a.options.bottomHeight&&a.getGoodsAjax()}},getGoodsAjax:function(){var a=this;a.isLoading=!0;var o=a.container,i=a.options.wallobj.find(".ajax_url").val(),t=(a.options.wallobj.find(".ajax_jsonp").val()||"",a.options.wallobj.find(".ajax_jsonpCallback").val()||"",a.options.wallobj.find(".ajax_param")),l={},e=[];t.each(function(a){var o=$(this);l[o.attr("param-name")]=o.val(),e.push(o.val())});var n=e.join("_");if(a.ajaxData[n]){a.isLoading=!1,$(".wall_loading").remove();var s=a.ajaxData[n];s.isOldAjax=!0,a.setBackParams(s),a.options.ajaxSuccBack&&a.options.ajaxSuccBack(s)}else 0==$(".wall_loading ,#loading_wrap ,#loading_wrap_v2").length&&o.append('<div class="wall_loading"><span>正在加载中。。。。</span></div>'),$.ajax({url:i,type:"get",dataType:"jsonp",data:l,success:function(o){if(null==o);else{var i,t,e="";if(e=o.success,o.returnCode?i=o.returnCode:o.status&&(i=o.status.code),t=o.result||o.data,(1001==i||"SUCCESS"==i||e)&&$.isPlainObject(t)){if(t.wallobj=a.options.wallobj,t.dataKey=n,t.params=l,t.wall&&t.wall.docs)for(var s=t.wall.docs,c=0;c<s.length;c++){var d=s[c];d&&(d.index=a.itemIndex,a.itemIndex++)}a.ajaxData[n]=t,$(".wall_loading").remove(),a.isSureBack(l)&&(a.setBackParams(t),a.options.ajaxSuccBack&&a.options.ajaxSuccBack(t))}}},complete:function(){a.isLoading=!1,$(".wall_loading").remove()}})},setBackParams:function(a){a.wall&&a.wall.cpc_offset&&_setWallParam("cpc_offset",a.wall.cpc_offset)},packageItems:function(a){var o=this,i=!1;if(!a||!a.length)return o.emptyClick++,o.emptyClick>5&&(o.scrollEnd(),o.emptyClick=0),!1;o.emptyClick=0;for(var t=0;t<a.length;t++){var l=a[t],e="";e=o.options.getItemHtmlFun&&o.options.getItemHtmlFun(l),e&&(o.itemPackageHtml+=e||"",o.itemPackageNum++),o.itemPackageNum>=o.options.itemPackageNumMax&&(o.pushPackageDom(),i=!0)}i||setTimeout(function(){o.isAllowAjax()},50)},pushPackageDom:function(){var a=this;if(a.itemPackageHtml&&a.itemPackageNum){var o='<div class="goods_list_mod clearfix J_mod_hidebox">'+a.itemPackageHtml+"</div>";a.options.wallobj.find(".J_scroll_wallbox").append(o),a.itemPackageHtml="",a.itemPackageNum=0,a.options.wallobj.find(".J_scroll_wallbox").css("height","auto"),setTimeout(function(){MoGu.dynamicImage&&MoGu.dynamicImage.checkImages()},80)}},addNoGoodsTip:function(){var a=this,i=o.goods.noGoods&&o.goods.noGoods()||'<div class="no_goods_img"></div><p class="no_goods_tip">没有相关的商品结果哦~~</p>';a.options.wallobj.find(".J_scroll_wallbox").append(i)},addNoMoreTip:function(){var a=this,i=o.goods.noMore&&o.goods.noMore()||'<div id="like_list_nomore"><div>没有更多啦~</div></div>';a.options.wallobj.find(".J_scroll_wallbox").append(i)},scrollEnd:function(){var a=this;a.isAjaxEnd=!0,a.pushPackageDom()},isSureBack:function(a){var o=_getWallAllParams();return $.each(a,function(a,i){return o[a]!=i?!1:void 0}),!0},reLoadAjax:function(){var a=this,o=a.options.wallobj.find(".J_scroll_wallbox");o.css("height",$(window).height()),o.html(""),a.itemPackageHtml="",a.itemPackageNum=0,a.isAjaxEnd=!1,a.isLoading=!1,a.emptyClick=0,_setWallParam("cpc_offset",0),MoGu.wall&&MoGu.wall.wallExposeLog&&MoGu.wall.wallExposeLog.resetBaseParams&&MoGu.wall.wallExposeLog.resetBaseParams(),a.itemIndex=0,a.getGoodsAjax()},init:function(){this.initLoaderTimer()}},MoGu.AjaxWallLoader=n,n});define("module/wall-mod",["module/base","module/temp","module/AjaxWallLoader","module/WallExposeLog"],function(a,l,p,o){function t(a){var p=r.ptpCVal,o=r.ptpWallDoc;return a.cparam&&(o=r.ptpWallCpc),l.goods.getItemHtml(a,o,p)}function e(a){if(null!=a.wallobj){m.storeCommonVarFromInitData(a),c&&c.scrollAjaxPushLog(a);var l=a.wall.docs;n.packageItems(l),a.wall.isEnd&&(n.scrollEnd(),"1"==a.param.page&&a.wall&&a.wall.docs&&0==a.wall.docs.length&&n.addNoGoodsTip()),_setWallParam("page",parseInt(a.param.page)+1)}}MoGu.wall=MoGu.wall||{};var m=MoGu.wall,r={},n=new p({ajaxSuccBack:e,getItemHtmlFun:t,itemPackageNumMax:40}),c=new o;return m.temp=l,m.Common=r,m.ajaxWallLoader=n,m.wallExposeLog=c,m.storeCommonVarFromInitData=function(a){r=$.extend(r,{ptpWallDoc:a.param&&a.param.ptpWallDoc?a.param.ptpWallDoc:"",ptpWallCpc:a.param&&a.param.ptpWallCpc?a.param.ptpWallCpc:"",ptpCVal:a.param&&a.param.ptpPartC?a.param.ptpPartC:""})},m.init=function(){n.init()},m});